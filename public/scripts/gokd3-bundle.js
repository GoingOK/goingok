!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.gokd3=t():e.gokd3=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){let n,i;if(void 0===t)for(const t of e)null!=t&&(void 0===n?t>=t&&(n=i=t):(n>t&&(n=t),i<t&&(i=t)));else{let a=-1;for(let o of e)null!=(o=t(o,++a,e))&&(void 0===n?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}e.r(t),e.d(t,{buildControlAdminAnalyticsCharts:()=>Nc,buildControlAuthorAnalyticsCharts:()=>Hc,buildExperimentAdminAnalyticsCharts:()=>zc,buildExperimentAuthorAnalyticsCharts:()=>qc});var i=Array.prototype,a=i.slice;function o(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function r(e){let t=e,n=e;function i(e,t,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){const o=i+a>>>1;n(e[o],t)<0?i=o+1:a=o}return i}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>o(e(t),n)}(e)),{left:i,center:function(e,n,a,o){null==a&&(a=0),null==o&&(o=e.length);const r=i(e,n,a,o-1);return r>a&&t(e[r-1],n)>-t(e[r],n)?r-1:r},right:function(e,t,i,a){for(null==i&&(i=0),null==a&&(a=e.length);i<a;){const o=i+a>>>1;n(e[o],t)>0?a=o:i=o+1}return i}}}i.map;const s=r(o),c=s.right,g=(s.left,r((function(e){return null===e?NaN:+e})).center,c);function l(e){return function(){return e}}function h(e){return e}var d=Math.sqrt(50),p=Math.sqrt(10),u=Math.sqrt(2);function m(e,t,n){var i,a,o,r,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(r=f(e,t,n))||!isFinite(r))return[];if(r>0){let n=Math.round(e/r),i=Math.round(t/r);for(n*r<e&&++n,i*r>t&&--i,o=new Array(a=i-n+1);++s<a;)o[s]=(n+s)*r}else{r=-r;let n=Math.round(e*r),i=Math.round(t*r);for(n/r<e&&++n,i/r>t&&--i,o=new Array(a=i-n+1);++s<a;)o[s]=(n+s)/r}return i&&o.reverse(),o}function f(e,t,n){var i=(t-e)/Math.max(0,n),a=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,a);return a>=0?(o>=d?10:o>=p?5:o>=u?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=d?10:o>=p?5:o>=u?2:1)}function y(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/a;return o>=d?a*=10:o>=p?a*=5:o>=u&&(a*=2),t<e?-a:a}function v(e){return Math.ceil(Math.log(function(e,t){let n=0;for(let t of e)null!=t&&(t=+t)>=t&&++n;return n}(e))/Math.LN2)+1}function w(e,t){let n=0,i=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,i+=t);else{let a=-1;for(let o of e)null!=(o=t(o,++a,e))&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function k(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let i=-1;for(let a of e)(a=+t(a,++i,e))&&(n+=a)}return n}function x(e,...t){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[n=o]=t;if(1===n.length||t.length>1){const r=Uint32Array.from(e,((e,t)=>t));return t.length>1?(t=t.map((t=>e.map(t))),r.sort(((e,n)=>{for(const i of t){const t=o(i[e],i[n]);if(t)return t}}))):(n=e.map(n),r.sort(((e,t)=>o(n[e],n[t])))),i=e,a=r,Array.from(a,(e=>i[e]))}var i,a;return e.sort(n)}function b(e){return e}var A=1e-6;function _(e){return"translate("+e+",0)"}function R(e){return"translate(0,"+e+")"}function T(e){return t=>+e(t)}function F(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function M(){return!this.__axis}function E(e,t){var n=[],i=null,a=null,o=6,r=6,s=3,c="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,g=1===e||4===e?-1:1,l=4===e||2===e?"x":"y",h=1===e||3===e?_:R;function d(d){var p=null==i?t.ticks?t.ticks.apply(t,n):t.domain():i,u=null==a?t.tickFormat?t.tickFormat.apply(t,n):b:a,m=Math.max(o,0)+s,f=t.range(),y=+f[0]+c,v=+f[f.length-1]+c,w=(t.bandwidth?F:T)(t.copy(),c),k=d.selection?d.selection():d,x=k.selectAll(".domain").data([null]),_=k.selectAll(".tick").data(p,t).order(),R=_.exit(),E=_.enter().append("g").attr("class","tick"),C=_.select("line"),D=_.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(E),C=C.merge(E.append("line").attr("stroke","currentColor").attr(l+"2",g*o)),D=D.merge(E.append("text").attr("fill","currentColor").attr(l,g*m).attr("dy",1===e?"0em":3===e?"0.71em":"0.32em")),d!==k&&(x=x.transition(d),_=_.transition(d),C=C.transition(d),D=D.transition(d),R=R.transition(d).attr("opacity",A).attr("transform",(function(e){return isFinite(e=w(e))?h(e+c):this.getAttribute("transform")})),E.attr("opacity",A).attr("transform",(function(e){var t=this.parentNode.__axis;return h((t&&isFinite(t=t(e))?t:w(e))+c)}))),R.remove(),x.attr("d",4===e||2===e?r?"M"+g*r+","+y+"H"+c+"V"+v+"H"+g*r:"M"+c+","+y+"V"+v:r?"M"+y+","+g*r+"V"+c+"H"+v+"V"+g*r:"M"+y+","+c+"H"+v),_.attr("opacity",1).attr("transform",(function(e){return h(w(e)+c)})),C.attr(l+"2",g*o),D.attr(l,g*m).text(u),k.filter(M).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===e?"start":4===e?"end":"middle"),k.each((function(){this.__axis=w}))}return d.scale=function(e){return arguments.length?(t=e,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),d):n.slice()},d.tickValues=function(e){return arguments.length?(i=null==e?null:Array.from(e),d):i&&i.slice()},d.tickFormat=function(e){return arguments.length?(a=e,d):a},d.tickSize=function(e){return arguments.length?(o=r=+e,d):o},d.tickSizeInner=function(e){return arguments.length?(o=+e,d):o},d.tickSizeOuter=function(e){return arguments.length?(r=+e,d):r},d.tickPadding=function(e){return arguments.length?(s=+e,d):s},d.offset=function(e){return arguments.length?(c=+e,d):c},d}function C(e){return E(2,e)}function D(e){return E(3,e)}function $(e){return E(4,e)}function P(){}function S(e){return null==e?P:function(){return this.querySelector(e)}}function N(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function V(){return[]}function z(e){return null==e?V:function(){return this.querySelectorAll(e)}}function B(e){return function(){return this.matches(e)}}function K(e){return function(t){return t.matches(e)}}var U=Array.prototype.find;function I(){return this.firstElementChild}var Y=Array.prototype.filter;function L(){return Array.from(this.children)}function H(e){return new Array(e.length)}function j(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function q(e){return function(){return e}}function O(e,t,n,i,a,o){for(var r,s=0,c=t.length,g=o.length;s<g;++s)(r=t[s])?(r.__data__=o[s],i[s]=r):n[s]=new j(e,o[s]);for(;s<c;++s)(r=t[s])&&(a[s]=r)}function W(e,t,n,i,a,o,r){var s,c,g,l=new Map,h=t.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(c=t[s])&&(p[s]=g=r.call(c,c.__data__,s,t)+"",l.has(g)?a[s]=c:l.set(g,c));for(s=0;s<d;++s)g=r.call(e,o[s],s,o)+"",(c=l.get(g))?(i[s]=c,c.__data__=o[s],l.delete(g)):n[s]=new j(e,o[s]);for(s=0;s<h;++s)(c=t[s])&&l.get(p[s])===c&&(a[s]=c)}function X(e){return e.__data__}function G(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Z(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}j.prototype={constructor:j,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var J="http://www.w3.org/1999/xhtml";const Q={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ee(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Q.hasOwnProperty(t)?{space:Q[t],local:e}:e}function te(e){return function(){this.removeAttribute(e)}}function ne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ie(e,t){return function(){this.setAttribute(e,t)}}function ae(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function oe(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function re(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function se(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ce(e){return function(){this.style.removeProperty(e)}}function ge(e,t,n){return function(){this.style.setProperty(e,t,n)}}function le(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function he(e,t){return e.style.getPropertyValue(t)||se(e).getComputedStyle(e,null).getPropertyValue(t)}function de(e){return function(){delete this[e]}}function pe(e,t){return function(){this[e]=t}}function ue(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function me(e){return e.trim().split(/^|\s+/)}function fe(e){return e.classList||new ye(e)}function ye(e){this._node=e,this._names=me(e.getAttribute("class")||"")}function ve(e,t){for(var n=fe(e),i=-1,a=t.length;++i<a;)n.add(t[i])}function we(e,t){for(var n=fe(e),i=-1,a=t.length;++i<a;)n.remove(t[i])}function ke(e){return function(){ve(this,e)}}function xe(e){return function(){we(this,e)}}function be(e,t){return function(){(t.apply(this,arguments)?ve:we)(this,e)}}function Ae(){this.textContent=""}function _e(e){return function(){this.textContent=e}}function Re(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Te(){this.innerHTML=""}function Fe(e){return function(){this.innerHTML=e}}function Me(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Ee(){this.nextSibling&&this.parentNode.appendChild(this)}function Ce(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function De(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===J&&t.documentElement.namespaceURI===J?t.createElement(e):t.createElementNS(n,e)}}function $e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Pe(e){var t=ee(e);return(t.local?$e:De)(t)}function Se(){return null}function Ne(){var e=this.parentNode;e&&e.removeChild(this)}function Ve(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ze(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Be(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Ke(e){return function(){var t=this.__on;if(t){for(var n,i=0,a=-1,o=t.length;i<o;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function Ue(e,t,n){return function(){var i,a=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(a)for(var r=0,s=a.length;r<s;++r)if((i=a[r]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=t);this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},a?a.push(i):this.__on=[i]}}function Ie(e,t,n){var i=se(e),a=i.CustomEvent;"function"==typeof a?a=new a(t,n):(a=i.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Ye(e,t){return function(){return Ie(this,e,t)}}function Le(e,t){return function(){return Ie(this,e,t.apply(this,arguments))}}ye.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var He=[null];function je(e,t){this._groups=e,this._parents=t}function qe(){return new je([[document.documentElement]],He)}je.prototype=qe.prototype={constructor:je,select:function(e){"function"!=typeof e&&(e=S(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var o,r,s=t[a],c=s.length,g=i[a]=new Array(c),l=0;l<c;++l)(o=s[l])&&(r=e.call(o,o.__data__,l,s))&&("__data__"in o&&(r.__data__=o.__data__),g[l]=r);return new je(i,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return N(e.apply(this,arguments))}}(e):z(e);for(var t=this._groups,n=t.length,i=[],a=[],o=0;o<n;++o)for(var r,s=t[o],c=s.length,g=0;g<c;++g)(r=s[g])&&(i.push(e.call(r,r.__data__,g,s)),a.push(r));return new je(i,a)},selectChild:function(e){return this.select(null==e?I:function(e){return function(){return U.call(this.children,e)}}("function"==typeof e?e:K(e)))},selectChildren:function(e){return this.selectAll(null==e?L:function(e){return function(){return Y.call(this.children,e)}}("function"==typeof e?e:K(e)))},filter:function(e){"function"!=typeof e&&(e=B(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var o,r=t[a],s=r.length,c=i[a]=[],g=0;g<s;++g)(o=r[g])&&e.call(o,o.__data__,g,r)&&c.push(o);return new je(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,X);var n=t?W:O,i=this._parents,a=this._groups;"function"!=typeof e&&(e=q(e));for(var o=a.length,r=new Array(o),s=new Array(o),c=new Array(o),g=0;g<o;++g){var l=i[g],h=a[g],d=h.length,p=G(e.call(l,l&&l.__data__,g,i)),u=p.length,m=s[g]=new Array(u),f=r[g]=new Array(u),y=c[g]=new Array(d);n(l,h,m,f,y,p,t);for(var v,w,k=0,x=0;k<u;++k)if(v=m[k]){for(k>=x&&(x=k+1);!(w=f[x])&&++x<u;);v._next=w||null}}return(r=new je(r,i))._enter=s,r._exit=c,r},enter:function(){return new je(this._enter||this._groups.map(H),this._parents)},exit:function(){return new je(this._exit||this._groups.map(H),this._parents)},join:function(e,t,n){var i=this.enter(),a=this,o=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?o.remove():n(o),i&&a?i.merge(a).order():a},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,a=n.length,o=i.length,r=Math.min(a,o),s=new Array(a),c=0;c<r;++c)for(var g,l=n[c],h=i[c],d=l.length,p=s[c]=new Array(d),u=0;u<d;++u)(g=l[u]||h[u])&&(p[u]=g);for(;c<a;++c)s[c]=n[c];return new je(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,a=e[t],o=a.length-1,r=a[o];--o>=0;)(i=a[o])&&(r&&4^i.compareDocumentPosition(r)&&r.parentNode.insertBefore(i,r),r=i);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Z);for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o){for(var r,s=n[o],c=s.length,g=a[o]=new Array(c),l=0;l<c;++l)(r=s[l])&&(g[l]=r);g.sort(t)}return new je(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],a=0,o=i.length;a<o;++a){var r=i[a];if(r)return r}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var a,o=t[n],r=0,s=o.length;r<s;++r)(a=o[r])&&e.call(a,a.__data__,r,o);return this},attr:function(e,t){var n=ee(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?ne:te:"function"==typeof t?n.local?re:oe:n.local?ae:ie)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ce:"function"==typeof t?le:ge)(e,t,null==n?"":n)):he(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?de:"function"==typeof t?ue:pe)(e,t)):this.node()[e]},classed:function(e,t){var n=me(e+"");if(arguments.length<2){for(var i=fe(this.node()),a=-1,o=n.length;++a<o;)if(!i.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?be:t?ke:xe)(n,t))},text:function(e){return arguments.length?this.each(null==e?Ae:("function"==typeof e?Re:_e)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Te:("function"==typeof e?Me:Fe)(e)):this.node().innerHTML},raise:function(){return this.each(Ee)},lower:function(){return this.each(Ce)},append:function(e){var t="function"==typeof e?e:Pe(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Pe(e),i=null==t?Se:"function"==typeof t?t:S(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Ne)},clone:function(e){return this.select(e?ze:Ve)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var i,a,o=Be(e+""),r=o.length;if(!(arguments.length<2)){for(s=t?Ue:Ke,i=0;i<r;++i)this.each(s(o[i],t,n));return this}var s=this.node().__on;if(s)for(var c,g=0,l=s.length;g<l;++g)for(i=0,c=s[g];i<r;++i)if((a=o[i]).type===c.type&&a.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"==typeof t?Le:Ye)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i,a=e[t],o=0,r=a.length;o<r;++o)(i=a[o])&&(yield i)}};const Oe=qe;var We={value:()=>{}};function Xe(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new Ge(i)}function Ge(e){this._=e}function Ze(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",i=e.indexOf(".");if(i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function Je(e,t){for(var n,i=0,a=e.length;i<a;++i)if((n=e[i]).name===t)return n.value}function Qe(e,t,n){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=We,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=n&&e.push({name:t,value:n}),e}Ge.prototype=Xe.prototype={constructor:Ge,on:function(e,t){var n,i=this._,a=Ze(e+"",i),o=-1,r=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<r;)if(n=(e=a[o]).type)i[n]=Qe(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Qe(i[n],e.name,null);return this}for(;++o<r;)if((n=(e=a[o]).type)&&(n=Je(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ge(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,i,a=new Array(n),o=0;o<n;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(i=this._[e]).length;o<n;++o)i[o].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,o=i.length;a<o;++a)i[a].value.apply(t,n)}};const et=Xe;var tt,nt,it=0,at=0,ot=0,rt=0,st=0,ct=0,gt="object"==typeof performance&&performance.now?performance:Date,lt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ht(){return st||(lt(dt),st=gt.now()+ct)}function dt(){st=0}function pt(){this._call=this._time=this._next=null}function ut(e,t,n){var i=new pt;return i.restart(e,t,n),i}function mt(){st=(rt=gt.now())+ct,it=at=0;try{!function(){ht(),++it;for(var e,t=tt;t;)(e=st-t._time)>=0&&t._call.call(void 0,e),t=t._next;--it}()}finally{it=0,function(){for(var e,t,n=tt,i=1/0;n;)n._call?(i>n._time&&(i=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:tt=t);nt=e,yt(i)}(),st=0}}function ft(){var e=gt.now(),t=e-rt;t>1e3&&(ct-=t,rt=e)}function yt(e){it||(at&&(at=clearTimeout(at)),e-st>24?(e<1/0&&(at=setTimeout(mt,e-gt.now()-ct)),ot&&(ot=clearInterval(ot))):(ot||(rt=gt.now(),ot=setInterval(ft,1e3)),it=1,lt(mt)))}function vt(e,t,n){var i=new pt;return t=null==t?0:+t,i.restart((n=>{i.stop(),e(n+t)}),t,n),i}pt.prototype=ut.prototype={constructor:pt,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ht():+n)+(null==t?0:+t),this._next||nt===this||(nt?nt._next=this:tt=this,nt=this),this._call=e,this._time=n,yt()},stop:function(){this._call&&(this._call=null,this._time=1/0,yt())}};var wt=et("start","end","cancel","interrupt"),kt=[];function xt(e,t,n,i,a,o){var r=e.__transition;if(r){if(n in r)return}else e.__transition={};!function(e,t,n){var i,a=e.__transition;function o(c){var g,l,h,d;if(1!==n.state)return s();for(g in a)if((d=a[g]).name===n.name){if(3===d.state)return vt(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete a[g]):+g<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete a[g])}if(vt((function(){3===n.state&&(n.state=4,n.timer.restart(r,n.delay,n.time),r(c))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),g=0,l=-1;g<h;++g)(d=n.tween[g].value.call(e,e.__data__,n.index,n.group))&&(i[++l]=d);i.length=l+1}}function r(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,r=i.length;++o<r;)i[o].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=ut((function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}),0,n.time)}(e,n,{name:t,index:i,group:a,on:wt,tween:kt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function bt(e,t){var n=_t(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function At(e,t){var n=_t(e,t);if(n.state>3)throw new Error("too late; already running");return n}function _t(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Rt(e,t){var n,i,a,o=e.__transition,r=!0;if(o){for(a in t=null==t?null:t+"",o)(n=o[a]).name===t?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[a]):r=!1;r&&delete e.__transition}}function Tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ft,Mt=180/Math.PI,Et={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ct(e,t,n,i,a,o){var r,s,c;return(r=Math.sqrt(e*e+t*t))&&(e/=r,t/=r),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,c/=s),e*i<t*n&&(e=-e,t=-t,c=-c,r=-r),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*Mt,skewX:Math.atan(c)*Mt,scaleX:r,scaleY:s}}function Dt(e,t,n,i){function a(e){return e.length?e.pop()+" ":""}return function(o,r){var s=[],c=[];return o=e(o),r=e(r),function(e,i,a,o,r,s){if(e!==a||i!==o){var c=r.push("translate(",null,t,null,n);s.push({i:c-4,x:Tt(e,a)},{i:c-2,x:Tt(i,o)})}else(a||o)&&r.push("translate("+a+t+o+n)}(o.translateX,o.translateY,r.translateX,r.translateY,s,c),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(a(n)+"rotate(",null,i)-2,x:Tt(e,t)})):t&&n.push(a(n)+"rotate("+t+i)}(o.rotate,r.rotate,s,c),function(e,t,n,o){e!==t?o.push({i:n.push(a(n)+"skewX(",null,i)-2,x:Tt(e,t)}):t&&n.push(a(n)+"skewX("+t+i)}(o.skewX,r.skewX,s,c),function(e,t,n,i,o,r){if(e!==n||t!==i){var s=o.push(a(o)+"scale(",null,",",null,")");r.push({i:s-4,x:Tt(e,n)},{i:s-2,x:Tt(t,i)})}else 1===n&&1===i||o.push(a(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,r.scaleX,r.scaleY,s,c),o=r=null,function(e){for(var t,n=-1,i=c.length;++n<i;)s[(t=c[n]).i]=t.x(e);return s.join("")}}}var $t=Dt((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Et:Ct(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Pt=Dt((function(e){return null==e?Et:(Ft||(Ft=document.createElementNS("http://www.w3.org/2000/svg","g")),Ft.setAttribute("transform",e),(e=Ft.transform.baseVal.consolidate())?Ct((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Et)}),", ",")",")");function St(e,t){var n,i;return function(){var a=At(this,e),o=a.tween;if(o!==n)for(var r=0,s=(i=n=o).length;r<s;++r)if(i[r].name===t){(i=i.slice()).splice(r,1);break}a.tween=i}}function Nt(e,t,n){var i,a;if("function"!=typeof n)throw new Error;return function(){var o=At(this,e),r=o.tween;if(r!==i){a=(i=r).slice();for(var s={name:t,value:n},c=0,g=a.length;c<g;++c)if(a[c].name===t){a[c]=s;break}c===g&&a.push(s)}o.tween=a}}function Vt(e,t,n){var i=e._id;return e.each((function(){var e=At(this,i);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return _t(e,i).value[t]}}function zt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bt(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Kt(){}var Ut=.7,It=1/Ut,Yt="\\s*([+-]?\\d+)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jt=/^#([0-9a-f]{3,8})$/,qt=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),Ot=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),Wt=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${Lt}\\)$`),Xt=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${Lt}\\)$`),Gt=new RegExp(`^hsl\\(${Lt},${Ht},${Ht}\\)$`),Zt=new RegExp(`^hsla\\(${Lt},${Ht},${Ht},${Lt}\\)$`),Jt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qt(){return this.rgb().formatHex()}function en(){return this.rgb().formatRgb()}function tn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?nn(t):3===n?new sn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?an(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?an(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=qt.exec(e))?new sn(t[1],t[2],t[3],1):(t=Ot.exec(e))?new sn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Wt.exec(e))?an(t[1],t[2],t[3],t[4]):(t=Xt.exec(e))?an(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Gt.exec(e))?pn(t[1],t[2]/100,t[3]/100,1):(t=Zt.exec(e))?pn(t[1],t[2]/100,t[3]/100,t[4]):Jt.hasOwnProperty(e)?nn(Jt[e]):"transparent"===e?new sn(NaN,NaN,NaN,0):null}function nn(e){return new sn(e>>16&255,e>>8&255,255&e,1)}function an(e,t,n,i){return i<=0&&(e=t=n=NaN),new sn(e,t,n,i)}function on(e){return e instanceof Kt||(e=tn(e)),e?new sn((e=e.rgb()).r,e.g,e.b,e.opacity):new sn}function rn(e,t,n,i){return 1===arguments.length?on(e):new sn(e,t,n,null==i?1:i)}function sn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function cn(){return`#${dn(this.r)}${dn(this.g)}${dn(this.b)}`}function gn(){const e=ln(this.opacity);return`${1===e?"rgb(":"rgba("}${hn(this.r)}, ${hn(this.g)}, ${hn(this.b)}${1===e?")":`, ${e})`}`}function ln(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dn(e){return((e=hn(e))<16?"0":"")+e.toString(16)}function pn(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mn(e,t,n,i)}function un(e){if(e instanceof mn)return new mn(e.h,e.s,e.l,e.opacity);if(e instanceof Kt||(e=tn(e)),!e)return new mn;if(e instanceof mn)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),o=Math.max(t,n,i),r=NaN,s=o-a,c=(o+a)/2;return s?(r=t===o?(n-i)/s+6*(n<i):n===o?(i-t)/s+2:(t-n)/s+4,s/=c<.5?o+a:2-o-a,r*=60):s=c>0&&c<1?0:r,new mn(r,s,c,e.opacity)}function mn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function fn(e){return(e=(e||0)%360)<0?e+360:e}function yn(e){return Math.max(0,Math.min(1,e||0))}function vn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function wn(e,t,n,i,a){var o=e*e,r=o*e;return((1-3*e+3*o-r)*t+(4-6*o+3*r)*n+(1+3*e+3*o-3*r)*i+r*a)/6}zt(Kt,tn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Qt,formatHex:Qt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return un(this).formatHsl()},formatRgb:en,toString:en}),zt(sn,rn,Bt(Kt,{brighter(e){return e=null==e?It:Math.pow(It,e),new sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Ut:Math.pow(Ut,e),new sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sn(hn(this.r),hn(this.g),hn(this.b),ln(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cn,formatHex:cn,formatHex8:function(){return`#${dn(this.r)}${dn(this.g)}${dn(this.b)}${dn(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:gn,toString:gn})),zt(mn,(function(e,t,n,i){return 1===arguments.length?un(e):new mn(e,t,n,null==i?1:i)}),Bt(Kt,{brighter(e){return e=null==e?It:Math.pow(It,e),new mn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Ut:Math.pow(Ut,e),new mn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new sn(vn(e>=240?e-240:e+120,a,i),vn(e,a,i),vn(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new mn(fn(this.h),yn(this.s),yn(this.l),ln(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ln(this.opacity);return`${1===e?"hsl(":"hsla("}${fn(this.h)}, ${100*yn(this.s)}%, ${100*yn(this.l)}%${1===e?")":`, ${e})`}`}}));const kn=e=>()=>e;function xn(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):kn(isNaN(e)?t:e)}const bn=function e(t){var n=function(e){return 1==(e=+e)?xn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):kn(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=rn(e)).r,(t=rn(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),r=xn(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=o(t),e.opacity=r(t),e+""}}return i.gamma=e,i}(1);function An(e){return function(t){var n,i,a=t.length,o=new Array(a),r=new Array(a),s=new Array(a);for(n=0;n<a;++n)i=rn(t[n]),o[n]=i.r||0,r[n]=i.g||0,s[n]=i.b||0;return o=e(o),r=e(r),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=r(e),i.b=s(e),i+""}}}An((function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[i],o=e[i+1],r=i>0?e[i-1]:2*a-o,s=i<t-1?e[i+2]:2*o-a;return wn((n-i/t)*t,r,a,o,s)}})),An((function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),a=e[(i+t-1)%t],o=e[i%t],r=e[(i+1)%t],s=e[(i+2)%t];return wn((n-i/t)*t,a,o,r,s)}}));var _n=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rn=new RegExp(_n.source,"g");function Tn(e,t){var n,i,a,o=_n.lastIndex=Rn.lastIndex=0,r=-1,s=[],c=[];for(e+="",t+="";(n=_n.exec(e))&&(i=Rn.exec(t));)(a=i.index)>o&&(a=t.slice(o,a),s[r]?s[r]+=a:s[++r]=a),(n=n[0])===(i=i[0])?s[r]?s[r]+=i:s[++r]=i:(s[++r]=null,c.push({i:r,x:Tt(n,i)})),o=Rn.lastIndex;return o<t.length&&(a=t.slice(o),s[r]?s[r]+=a:s[++r]=a),s.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,i=0;i<t;++i)s[(n=c[i]).i]=n.x(e);return s.join("")})}function Fn(e,t){var n;return("number"==typeof t?Tt:t instanceof tn?bn:(n=tn(t))?(t=n,bn):Tn)(e,t)}function Mn(e){return function(){this.removeAttribute(e)}}function En(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cn(e,t,n){var i,a,o=n+"";return function(){var r=this.getAttribute(e);return r===o?null:r===i?a:a=t(i=r,n)}}function Dn(e,t,n){var i,a,o=n+"";return function(){var r=this.getAttributeNS(e.space,e.local);return r===o?null:r===i?a:a=t(i=r,n)}}function $n(e,t,n){var i,a,o;return function(){var r,s,c=n(this);if(null!=c)return(r=this.getAttribute(e))===(s=c+"")?null:r===i&&s===a?o:(a=s,o=t(i=r,c));this.removeAttribute(e)}}function Pn(e,t,n){var i,a,o;return function(){var r,s,c=n(this);if(null!=c)return(r=this.getAttributeNS(e.space,e.local))===(s=c+"")?null:r===i&&s===a?o:(a=s,o=t(i=r,c));this.removeAttributeNS(e.space,e.local)}}function Sn(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Nn(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Vn(e,t){var n,i;function a(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&Nn(e,a)),n}return a._value=t,a}function zn(e,t){var n,i;function a(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&Sn(e,a)),n}return a._value=t,a}function Bn(e,t){return function(){bt(this,e).delay=+t.apply(this,arguments)}}function Kn(e,t){return t=+t,function(){bt(this,e).delay=t}}function Un(e,t){return function(){At(this,e).duration=+t.apply(this,arguments)}}function In(e,t){return t=+t,function(){At(this,e).duration=t}}function Yn(e,t){if("function"!=typeof t)throw new Error;return function(){At(this,e).ease=t}}function Ln(e,t,n){var i,a,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?bt:At;return function(){var r=o(this,e),s=r.on;s!==i&&(a=(i=s).copy()).on(t,n),r.on=a}}var Hn=Oe.prototype.constructor;function jn(e){return function(){this.style.removeProperty(e)}}function qn(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function On(e,t,n){var i,a;function o(){var o=t.apply(this,arguments);return o!==a&&(i=(a=o)&&qn(e,o,n)),i}return o._value=t,o}function Wn(e){return function(t){this.textContent=e.call(this,t)}}function Xn(e){var t,n;function i(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Wn(i)),t}return i._value=e,i}var Gn=0;function Zn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Jn(){return++Gn}var Qn=Oe.prototype;Zn.prototype=function(e){return Oe().transition(e)}.prototype={constructor:Zn,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=S(e));for(var i=this._groups,a=i.length,o=new Array(a),r=0;r<a;++r)for(var s,c,g=i[r],l=g.length,h=o[r]=new Array(l),d=0;d<l;++d)(s=g[d])&&(c=e.call(s,s.__data__,d,g))&&("__data__"in s&&(c.__data__=s.__data__),h[d]=c,xt(h[d],t,n,d,h,_t(s,n)));return new Zn(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=z(e));for(var i=this._groups,a=i.length,o=[],r=[],s=0;s<a;++s)for(var c,g=i[s],l=g.length,h=0;h<l;++h)if(c=g[h]){for(var d,p=e.call(c,c.__data__,h,g),u=_t(c,n),m=0,f=p.length;m<f;++m)(d=p[m])&&xt(d,t,n,m,p,u);o.push(p),r.push(c)}return new Zn(o,r,t,n)},selectChild:Qn.selectChild,selectChildren:Qn.selectChildren,filter:function(e){"function"!=typeof e&&(e=B(e));for(var t=this._groups,n=t.length,i=new Array(n),a=0;a<n;++a)for(var o,r=t[a],s=r.length,c=i[a]=[],g=0;g<s;++g)(o=r[g])&&e.call(o,o.__data__,g,r)&&c.push(o);return new Zn(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,a=n.length,o=Math.min(i,a),r=new Array(i),s=0;s<o;++s)for(var c,g=t[s],l=n[s],h=g.length,d=r[s]=new Array(h),p=0;p<h;++p)(c=g[p]||l[p])&&(d[p]=c);for(;s<i;++s)r[s]=t[s];return new Zn(r,this._parents,this._name,this._id)},selection:function(){return new Hn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Jn(),i=this._groups,a=i.length,o=0;o<a;++o)for(var r,s=i[o],c=s.length,g=0;g<c;++g)if(r=s[g]){var l=_t(r,t);xt(r,e,n,g,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Zn(i,this._parents,e,n)},call:Qn.call,nodes:Qn.nodes,node:Qn.node,size:Qn.size,empty:Qn.empty,each:Qn.each,on:function(e,t){var n=this._id;return arguments.length<2?_t(this.node(),n).on.on(e):this.each(Ln(n,e,t))},attr:function(e,t){var n=ee(e),i="transform"===n?Pt:Fn;return this.attrTween(e,"function"==typeof t?(n.local?Pn:$n)(n,i,Vt(this,"attr."+e,t)):null==t?(n.local?En:Mn)(n):(n.local?Dn:Cn)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=ee(e);return this.tween(n,(i.local?Vn:zn)(i,t))},style:function(e,t,n){var i="transform"==(e+="")?$t:Fn;return null==t?this.styleTween(e,function(e,t){var n,i,a;return function(){var o=he(this,e),r=(this.style.removeProperty(e),he(this,e));return o===r?null:o===n&&r===i?a:a=t(n=o,i=r)}}(e,i)).on("end.style."+e,jn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var i,a,o;return function(){var r=he(this,e),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(e),c=s=he(this,e)),r===c?null:r===i&&c===a?o:(a=c,o=t(i=r,s))}}(e,i,Vt(this,"style."+e,t))).each(function(e,t){var n,i,a,o,r="style."+t,s="end."+r;return function(){var c=At(this,e),g=c.on,l=null==c.value[r]?o||(o=jn(t)):void 0;g===n&&a===l||(i=(n=g).copy()).on(s,a=l),c.on=i}}(this._id,e)):this.styleTween(e,function(e,t,n){var i,a,o=n+"";return function(){var r=he(this,e);return r===o?null:r===i?a:a=t(i=r,n)}}(e,i,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,On(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Vt(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Xn(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i,a=_t(this.node(),n).tween,o=0,r=a.length;o<r;++o)if((i=a[o]).name===e)return i.value;return null}return this.each((null==t?St:Nt)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Bn:Kn)(t,e)):_t(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Un:In)(t,e)):_t(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Yn(t,e)):_t(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;At(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,i=n._id,a=n.size();return new Promise((function(o,r){var s={value:r},c={value:function(){0==--a&&o()}};n.each((function(){var n=At(this,i),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t})),0===a&&o()}))},[Symbol.iterator]:Qn[Symbol.iterator]};var ei={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function ti(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Oe.prototype.interrupt=function(e){return this.each((function(){Rt(this,e)}))},Oe.prototype.transition=function(e){var t,n;e instanceof Zn?(t=e._id,e=e._name):(t=Jn(),(n=ei).time=ht(),e=null==e?null:e+"");for(var i=this._groups,a=i.length,o=0;o<a;++o)for(var r,s=i[o],c=s.length,g=0;g<c;++g)(r=s[g])&&xt(r,e,t,g,s,n||ti(r,t));return new Zn(i,this._parents,e,t)};const{abs:ni,max:ii,min:ai}=Math;function oi(e){return{type:e}}function ri(e){return"string"==typeof e?new je([[document.querySelector(e)]],[document.documentElement]):new je([[e]],He)}function si(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}["w","e"].map(oi),["n","s"].map(oi),["n","w","e","s","nw","ne","sw","se"].map(oi);const ci={passive:!1},gi={capture:!0,passive:!1};function li(e){e.stopImmediatePropagation()}function hi(e){e.preventDefault(),e.stopImmediatePropagation()}function di(e){var t=e.document.documentElement,n=ri(e).on("dragstart.drag",hi,gi);"onselectstart"in t?n.on("selectstart.drag",hi,gi):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function pi(e,t){var n=e.document.documentElement,i=ri(e).on("dragstart.drag",null);t&&(i.on("click.drag",hi,gi),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ui=e=>()=>e;function mi(e,{sourceEvent:t,subject:n,target:i,identifier:a,active:o,x:r,y:s,dx:c,dy:g,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:l}})}function fi(e){return!e.ctrlKey&&!e.button}function yi(){return this.parentNode}function vi(e,t){return null==t?{x:e.x,y:e.y}:t}function wi(){return navigator.maxTouchPoints||"ontouchstart"in this}function ki(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var a,o,r,s,c,g,l,h,d,p=e._root,u={data:i},m=e._x0,f=e._y0,y=e._x1,v=e._y1;if(!p)return e._root=u,e;for(;p.length;)if((g=t>=(o=(m+y)/2))?m=o:y=o,(l=n>=(r=(f+v)/2))?f=r:v=r,a=p,!(p=p[h=l<<1|g]))return a[h]=u,e;if(s=+e._x.call(null,p.data),c=+e._y.call(null,p.data),t===s&&n===c)return u.next=p,a?a[h]=u:e._root=u,e;do{a=a?a[h]=new Array(4):e._root=new Array(4),(g=t>=(o=(m+y)/2))?m=o:y=o,(l=n>=(r=(f+v)/2))?f=r:v=r}while((h=l<<1|g)==(d=(c>=r)<<1|s>=o));return a[d]=p,a[h]=u,e}function xi(e,t,n,i,a){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=a}function bi(e){return e[0]}function Ai(e){return e[1]}function _i(e,t,n){var i=new Ri(null==t?bi:t,null==n?Ai:n,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function Ri(e,t,n,i,a,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=a,this._y1=o,this._root=void 0}function Ti(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}mi.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Fi=_i.prototype=Ri.prototype;function Mi(e){return function(){return e}}function Ei(e){return 1e-6*(e()-.5)}function Ci(e){return e.x+e.vx}function Di(e){return e.y+e.vy}function $i(e){var t,n,i,a=1,o=1;function r(){for(var e,r,c,g,l,h,d,p=t.length,u=0;u<o;++u)for(r=_i(t,Ci,Di).visitAfter(s),e=0;e<p;++e)c=t[e],h=n[c.index],d=h*h,g=c.x+c.vx,l=c.y+c.vy,r.visit(m);function m(e,t,n,o,r){var s=e.data,p=e.r,u=h+p;if(!s)return t>g+u||o<g-u||n>l+u||r<l-u;if(s.index>c.index){var m=g-s.x-s.vx,f=l-s.y-s.vy,y=m*m+f*f;y<u*u&&(0===m&&(y+=(m=Ei(i))*m),0===f&&(y+=(f=Ei(i))*f),y=(u-(y=Math.sqrt(y)))/y*a,c.vx+=(m*=y)*(u=(p*=p)/(d+p)),c.vy+=(f*=y)*u,s.vx-=m*(u=1-u),s.vy-=f*u)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function c(){if(t){var i,a,o=t.length;for(n=new Array(o),i=0;i<o;++i)a=t[i],n[a.index]=+e(a,i,t)}}return"function"!=typeof e&&(e=Mi(null==e?1:+e)),r.initialize=function(e,n){t=e,i=n,c()},r.iterations=function(e){return arguments.length?(o=+e,r):o},r.strength=function(e){return arguments.length?(a=+e,r):a},r.radius=function(t){return arguments.length?(e="function"==typeof t?t:Mi(+t),c(),r):e},r}function Pi(e){return e.index}function Si(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}Fi.copy=function(){var e,t,n=new Ri(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Ti(i),n;for(e=[{source:i,target:n._root=new Array(4)}];i=e.pop();)for(var a=0;a<4;++a)(t=i.source[a])&&(t.length?e.push({source:t,target:i.target[a]=new Array(4)}):i.target[a]=Ti(t));return n},Fi.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return ki(this.cover(t,n),t,n,e)},Fi.addAll=function(e){var t,n,i,a,o=e.length,r=new Array(o),s=new Array(o),c=1/0,g=1/0,l=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(r[n]=i,s[n]=a,i<c&&(c=i),i>l&&(l=i),a<g&&(g=a),a>h&&(h=a));if(c>l||g>h)return this;for(this.cover(c,g).cover(l,h),n=0;n<o;++n)ki(this,r[n],s[n],e[n]);return this},Fi.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,a=this._x1,o=this._y1;if(isNaN(n))a=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var r,s,c=a-n||1,g=this._root;n>e||e>=a||i>t||t>=o;)switch(s=(t<i)<<1|e<n,(r=new Array(4))[s]=g,g=r,c*=2,s){case 0:a=n+c,o=i+c;break;case 1:n=a-c,o=i+c;break;case 2:a=n+c,i=o-c;break;case 3:n=a-c,i=o-c}this._root&&this._root.length&&(this._root=g)}return this._x0=n,this._y0=i,this._x1=a,this._y1=o,this},Fi.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},Fi.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Fi.find=function(e,t,n){var i,a,o,r,s,c,g,l=this._x0,h=this._y0,d=this._x1,p=this._y1,u=[],m=this._root;for(m&&u.push(new xi(m,l,h,d,p)),null==n?n=1/0:(l=e-n,h=t-n,d=e+n,p=t+n,n*=n);c=u.pop();)if(!(!(m=c.node)||(a=c.x0)>d||(o=c.y0)>p||(r=c.x1)<l||(s=c.y1)<h))if(m.length){var f=(a+r)/2,y=(o+s)/2;u.push(new xi(m[3],f,y,r,s),new xi(m[2],a,y,f,s),new xi(m[1],f,o,r,y),new xi(m[0],a,o,f,y)),(g=(t>=y)<<1|e>=f)&&(c=u[u.length-1],u[u.length-1]=u[u.length-1-g],u[u.length-1-g]=c)}else{var v=e-+this._x.call(null,m.data),w=t-+this._y.call(null,m.data),k=v*v+w*w;if(k<n){var x=Math.sqrt(n=k);l=e-x,h=t-x,d=e+x,p=t+x,i=m.data}}return i},Fi.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(r=+this._y.call(null,e)))return this;var t,n,i,a,o,r,s,c,g,l,h,d,p=this._root,u=this._x0,m=this._y0,f=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((g=o>=(s=(u+f)/2))?u=s:f=s,(l=r>=(c=(m+y)/2))?m=c:y=c,t=p,!(p=p[h=l<<1|g]))return this;if(!p.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;p.data!==e;)if(i=p,!(p=p.next))return this;return(a=p.next)&&delete p.next,i?(a?i.next=a:delete i.next,this):t?(a?t[h]=a:delete t[h],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=a,this)},Fi.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},Fi.root=function(){return this._root},Fi.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},Fi.visit=function(e){var t,n,i,a,o,r,s=[],c=this._root;for(c&&s.push(new xi(c,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(c=t.node,i=t.x0,a=t.y0,o=t.x1,r=t.y1)&&c.length){var g=(i+o)/2,l=(a+r)/2;(n=c[3])&&s.push(new xi(n,g,l,o,r)),(n=c[2])&&s.push(new xi(n,i,l,g,r)),(n=c[1])&&s.push(new xi(n,g,a,o,l)),(n=c[0])&&s.push(new xi(n,i,a,g,l))}return this},Fi.visitAfter=function(e){var t,n=[],i=[];for(this._root&&n.push(new xi(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var a=t.node;if(a.length){var o,r=t.x0,s=t.y0,c=t.x1,g=t.y1,l=(r+c)/2,h=(s+g)/2;(o=a[0])&&n.push(new xi(o,r,s,l,h)),(o=a[1])&&n.push(new xi(o,l,s,c,h)),(o=a[2])&&n.push(new xi(o,r,h,l,g)),(o=a[3])&&n.push(new xi(o,l,h,c,g))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},Fi.x=function(e){return arguments.length?(this._x=e,this):this._x},Fi.y=function(e){return arguments.length?(this._y=e,this):this._y};const Ni=4294967296;function Vi(e){return e.x}function zi(e){return e.y}var Bi=Math.PI*(3-Math.sqrt(5));function Ki(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var i=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++i<a;)o[i]=e+i*n;return o}function Ui(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}class Ii extends Map{constructor(e,t=qi){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,n]of e)this.set(t,n)}get(e){return super.get(Li(this,e))}has(e){return super.has(Li(this,e))}set(e,t){return super.set(Hi(this,e),t)}delete(e){return super.delete(ji(this,e))}}class Yi extends Set{constructor(e,t=qi){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const t of e)this.add(t)}has(e){return super.has(Li(this,e))}add(e){return super.add(Hi(this,e))}delete(e){return super.delete(ji(this,e))}}function Li({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Hi({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function ji({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(n),e.delete(i)),n}function qi(e){return null!==e&&"object"==typeof e?e.valueOf():e}const Oi=Symbol("implicit");function Wi(){var e=new Ii,t=[],n=[],i=Oi;function a(a){let o=e.get(a);if(void 0===o){if(i!==Oi)return i;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return a.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Ii;for(const i of n)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(e){return arguments.length?(n=Array.from(e),a):n.slice()},a.unknown=function(e){return arguments.length?(i=e,a):i},a.copy=function(){return Wi(t,n).unknown(i)},Ui.apply(a,arguments),a}function Xi(){var e,t,n=Wi().unknown(void 0),i=n.domain,a=n.range,o=0,r=1,s=!1,c=0,g=0,l=.5;function h(){var n=i().length,h=r<o,d=h?r:o,p=h?o:r;e=(p-d)/Math.max(1,n-c+2*g),s&&(e=Math.floor(e)),d+=(p-d-e*(n-c))*l,t=e*(1-c),s&&(d=Math.round(d),t=Math.round(t));var u=Ki(n).map((function(t){return d+e*t}));return a(h?u.reverse():u)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),h()):i()},n.range=function(e){return arguments.length?([o,r]=e,o=+o,r=+r,h()):[o,r]},n.rangeRound=function(e){return[o,r]=e,o=+o,r=+r,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(c=Math.min(1,g=+e),h()):c},n.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),h()):c},n.paddingOuter=function(e){return arguments.length?(g=+e,h()):g},n.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),h()):l},n.copy=function(){return Xi(i(),[o,r]).round(s).paddingInner(c).paddingOuter(g).align(l)},Ui.apply(h(),arguments)}function Gi(e,t){var n,i=t?t.length:0,a=e?Math.min(i,e.length):0,o=new Array(a),r=new Array(i);for(n=0;n<a;++n)o[n]=ea(e[n],t[n]);for(;n<i;++n)r[n]=t[n];return function(e){for(n=0;n<a;++n)r[n]=o[n](e);return r}}function Zi(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Ji(e,t){var n,i={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=ea(e[n],t[n]):a[n]=t[n];return function(e){for(n in i)a[n]=i[n](e);return a}}function Qi(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<i;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function ea(e,t){var n,i,a=typeof t;return null==t||"boolean"===a?kn(t):("number"===a?Tt:"string"===a?(n=tn(t))?(t=n,bn):Tn:t instanceof tn?bn:t instanceof Date?Zi:(i=t,!ArrayBuffer.isView(i)||i instanceof DataView?Array.isArray(t)?Gi:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Ji:Tt:Qi))(e,t)}function ta(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function na(e){return+e}var ia=[0,1];function aa(e){return e}function oa(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function ra(e,t,n){var i=e[0],a=e[1],o=t[0],r=t[1];return a<i?(i=oa(a,i),o=n(r,o)):(i=oa(i,a),o=n(o,r)),function(e){return o(i(e))}}function sa(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),r=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++r<i;)a[r]=oa(e[r],e[r+1]),o[r]=n(t[r],t[r+1]);return function(t){var n=g(e,t,1,i)-1;return o[n](a[n](t))}}function ca(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ga(){return function(){var e,t,n,i,a,o,r=ia,s=ia,c=ea,g=aa;function l(){var e,t,n,c=Math.min(r.length,s.length);return g!==aa&&(e=r[0],t=r[c-1],e>t&&(n=e,e=t,t=n),g=function(n){return Math.max(e,Math.min(t,n))}),i=c>2?sa:ra,a=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(a||(a=i(r.map(e),s,c)))(e(g(t)))}return h.invert=function(n){return g(t((o||(o=i(s,r.map(e),Tt)))(n)))},h.domain=function(e){return arguments.length?(r=Array.from(e,na),l()):r.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),l()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),c=ta,l()},h.clamp=function(e){return arguments.length?(g=!!e||aa,l()):g!==aa},h.interpolate=function(e){return arguments.length?(c=e,l()):c},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,i){return e=n,t=i,l()}}()(aa,aa)}var la,ha=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function da(e){if(!(t=ha.exec(e)))throw new Error("invalid format: "+e);var t;return new pa({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function pa(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function ua(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ma(e){return(e=ua(Math.abs(e)))?e[1]:NaN}function fa(e,t){var n=ua(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}da.prototype=pa.prototype,pa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const ya={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fa(100*e,t),r:fa,s:function(e,t){var n=ua(e,t);if(!n)return e+"";var i=n[0],a=n[1],o=a-(la=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,r=i.length;return o===r?i:o>r?i+new Array(o-r+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ua(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function va(e){return e}var wa,ka,xa,ba=Array.prototype.map,Aa=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function _a(e){var t=e.domain;return e.ticks=function(e){var n=t();return m(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return function(e,t,n,i){var a,o=y(e,t,n);switch((i=da(null==i?",f":i)).type){case"s":var r=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ma(t)/3)))-ma(Math.abs(e)))}(o,r))||(i.precision=a),xa(i,r);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ma(t)-ma(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=function(e){return Math.max(0,-ma(Math.abs(e)))}(o))||(i.precision=a-2*("%"===i.type))}return ka(i)}(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,a,o=t(),r=0,s=o.length-1,c=o[r],g=o[s],l=10;for(g<c&&(a=c,c=g,g=a,a=r,r=s,s=a);l-- >0;){if((a=f(c,g,n))===i)return o[r]=c,o[s]=g,t(o);if(a>0)c=Math.floor(c/a)*a,g=Math.ceil(g/a)*a;else{if(!(a<0))break;c=Math.ceil(c*a)/a,g=Math.floor(g*a)/a}i=a}return e},e}function Ra(){var e=ga();return e.copy=function(){return ca(e,Ra())},Ui.apply(e,arguments),_a(e)}wa=function(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?va:(t=ba.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var a=e.length,o=[],r=0,s=t[0],c=0;a>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),o.push(e.substring(a-=s,a+s)),!((c+=s+1)>i));)s=t[r=(r+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",r=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?va:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(ba.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",g=void 0===e.minus?"−":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=da(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,u=e.width,m=e.comma,f=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):ya[v]||(void 0===f&&(f=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var w="$"===d?a:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",k="$"===d?o:/[%p]/.test(v)?c:"",x=ya[v],b=/[defgprs%]/.test(v);function A(e){var a,o,c,d=w,A=k;if("c"===v)A=x(e)+A,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?l:x(Math.abs(e),f),y&&(e=function(e){e:for(var t,n=e.length,i=1,a=-1;i<n;++i)switch(e[i]){case".":a=t=i;break;case"0":0===a&&(a=i),t=i;break;default:if(!+e[i])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),_&&0==+e&&"+"!==h&&(_=!1),d=(_?"("===h?h:g:"-"===h||"("===h?"":h)+d,A=("s"===v?Aa[8+la/3]:"")+A+(_&&"("===h?")":""),b)for(a=-1,o=e.length;++a<o;)if(48>(c=e.charCodeAt(a))||c>57){A=(46===c?r+e.slice(a+1):e.slice(a))+A,e=e.slice(0,a);break}}m&&!p&&(e=i(e,1/0));var R=d.length+e.length+A.length,T=R<u?new Array(u-R+1).join(t):"";switch(m&&p&&(e=i(T+e,T.length?u-A.length:1/0),T=""),n){case"<":e=d+e+A+T;break;case"=":e=d+T+e+A;break;case"^":e=T.slice(0,R=T.length>>1)+d+e+A+T.slice(R);break;default:e=T+d+e+A}return s(e)}return f=void 0===f?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),A.toString=function(){return e+""},A}return{format:h,formatPrefix:function(e,t){var n=h(((e=da(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(ma(t)/3))),a=Math.pow(10,-i),o=Aa[8+i/3];return function(e){return n(a*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),ka=wa.format,xa=wa.formatPrefix;const Ta=1e3,Fa=6e4,Ma=36e5,Ea=864e5,Ca=6048e5,Da=31536e6;var $a=new Date,Pa=new Date;function Sa(e,t,n,i){function a(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return e(t=new Date(+t)),t},a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,i,o){var r,s=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return s;do{s.push(r=new Date(+n)),t(n,o),e(n)}while(r<n&&n<i);return s},a.filter=function(n){return Sa((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););}))},n&&(a.count=function(t,i){return $a.setTime(+t),Pa.setTime(+i),e($a),e(Pa),Math.floor(n($a,Pa))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(i?function(t){return i(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var Na=Sa((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Na.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Sa((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Na:null};const Va=Na;Na.range;var za=Sa((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Ta)}),(function(e,t){return(t-e)/Ta}),(function(e){return e.getUTCSeconds()}));const Ba=za;za.range;var Ka=Sa((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ta)}),(function(e,t){e.setTime(+e+t*Fa)}),(function(e,t){return(t-e)/Fa}),(function(e){return e.getMinutes()}));const Ua=Ka;Ka.range;var Ia=Sa((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ta-e.getMinutes()*Fa)}),(function(e,t){e.setTime(+e+t*Ma)}),(function(e,t){return(t-e)/Ma}),(function(e){return e.getHours()}));const Ya=Ia;Ia.range;var La=Sa((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fa)/Ea),(e=>e.getDate()-1));const Ha=La;function ja(e){return Sa((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fa)/Ca}))}La.range;var qa=ja(0),Oa=ja(1),Wa=ja(2),Xa=ja(3),Ga=ja(4),Za=ja(5),Ja=ja(6),Qa=(qa.range,Oa.range,Wa.range,Xa.range,Ga.range,Za.range,Ja.range,Sa((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})));const eo=Qa;Qa.range;var to=Sa((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));to.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Sa((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};const no=to;to.range;var io=Sa((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Fa)}),(function(e,t){return(t-e)/Fa}),(function(e){return e.getUTCMinutes()}));const ao=io;io.range;var oo=Sa((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Ma)}),(function(e,t){return(t-e)/Ma}),(function(e){return e.getUTCHours()}));const ro=oo;oo.range;var so=Sa((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Ea}),(function(e){return e.getUTCDate()-1}));const co=so;function go(e){return Sa((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Ca}))}so.range;var lo=go(0),ho=go(1),po=go(2),uo=go(3),mo=go(4),fo=go(5),yo=go(6),vo=(lo.range,ho.range,po.range,uo.range,mo.range,fo.range,yo.range,Sa((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})));const wo=vo;vo.range;var ko=Sa((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));ko.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Sa((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};const xo=ko;function bo(e,t,n,i,a,o){const s=[[Ba,1,Ta],[Ba,5,5e3],[Ba,15,15e3],[Ba,30,3e4],[o,1,Fa],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,Ma],[a,3,108e5],[a,6,216e5],[a,12,432e5],[i,1,Ea],[i,2,1728e5],[n,1,Ca],[t,1,2592e6],[t,3,7776e6],[e,1,Da]];function c(t,n,i){const a=Math.abs(n-t)/i,o=r((([,,e])=>e)).right(s,a);if(o===s.length)return e.every(y(t/Da,n/Da,i));if(0===o)return Va.every(Math.max(y(t,n,i),1));const[c,g]=s[a/s[o-1][2]<s[o][2]/a?o-1:o];return c.every(g)}return[function(e,t,n){const i=t<e;i&&([e,t]=[t,e]);const a=n&&"function"==typeof n.range?n:c(e,t,n),o=a?a.range(e,+t+1):[];return i?o.reverse():o},c]}ko.range;const[Ao,_o]=bo(xo,wo,lo,co,ro,ao),[Ro,To]=bo(no,eo,qa,Ha,Ya,Ua);function Fo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Mo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Eo(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Co,Do,$o={"-":"",_:" ",0:"0"},Po=/^\s*\d+/,So=/^%/,No=/[\\^$*+?|[\]().{}]/g;function Vo(e,t,n){var i=e<0?"-":"",a=(i?-e:e)+"",o=a.length;return i+(o<n?new Array(n-o+1).join(t)+a:a)}function zo(e){return e.replace(No,"\\$&")}function Bo(e){return new RegExp("^(?:"+e.map(zo).join("|")+")","i")}function Ko(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Uo(e,t,n){var i=Po.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function Io(e,t,n){var i=Po.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Yo(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Lo(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Ho(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function jo(e,t,n){var i=Po.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function qo(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Oo(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Wo(e,t,n){var i=Po.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function Xo(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function Go(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Zo(e,t,n){var i=Po.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function Jo(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Qo(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function er(e,t,n){var i=Po.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function tr(e,t,n){var i=Po.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function nr(e,t,n){var i=Po.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function ir(e,t,n){var i=So.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function ar(e,t,n){var i=Po.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function or(e,t,n){var i=Po.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function rr(e,t){return Vo(e.getDate(),t,2)}function sr(e,t){return Vo(e.getHours(),t,2)}function cr(e,t){return Vo(e.getHours()%12||12,t,2)}function gr(e,t){return Vo(1+Ha.count(no(e),e),t,3)}function lr(e,t){return Vo(e.getMilliseconds(),t,3)}function hr(e,t){return lr(e,t)+"000"}function dr(e,t){return Vo(e.getMonth()+1,t,2)}function pr(e,t){return Vo(e.getMinutes(),t,2)}function ur(e,t){return Vo(e.getSeconds(),t,2)}function mr(e){var t=e.getDay();return 0===t?7:t}function fr(e,t){return Vo(qa.count(no(e)-1,e),t,2)}function yr(e){var t=e.getDay();return t>=4||0===t?Ga(e):Ga.ceil(e)}function vr(e,t){return e=yr(e),Vo(Ga.count(no(e),e)+(4===no(e).getDay()),t,2)}function wr(e){return e.getDay()}function kr(e,t){return Vo(Oa.count(no(e)-1,e),t,2)}function xr(e,t){return Vo(e.getFullYear()%100,t,2)}function br(e,t){return Vo((e=yr(e)).getFullYear()%100,t,2)}function Ar(e,t){return Vo(e.getFullYear()%1e4,t,4)}function _r(e,t){var n=e.getDay();return Vo((e=n>=4||0===n?Ga(e):Ga.ceil(e)).getFullYear()%1e4,t,4)}function Rr(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vo(t/60|0,"0",2)+Vo(t%60,"0",2)}function Tr(e,t){return Vo(e.getUTCDate(),t,2)}function Fr(e,t){return Vo(e.getUTCHours(),t,2)}function Mr(e,t){return Vo(e.getUTCHours()%12||12,t,2)}function Er(e,t){return Vo(1+co.count(xo(e),e),t,3)}function Cr(e,t){return Vo(e.getUTCMilliseconds(),t,3)}function Dr(e,t){return Cr(e,t)+"000"}function $r(e,t){return Vo(e.getUTCMonth()+1,t,2)}function Pr(e,t){return Vo(e.getUTCMinutes(),t,2)}function Sr(e,t){return Vo(e.getUTCSeconds(),t,2)}function Nr(e){var t=e.getUTCDay();return 0===t?7:t}function Vr(e,t){return Vo(lo.count(xo(e)-1,e),t,2)}function zr(e){var t=e.getUTCDay();return t>=4||0===t?mo(e):mo.ceil(e)}function Br(e,t){return e=zr(e),Vo(mo.count(xo(e),e)+(4===xo(e).getUTCDay()),t,2)}function Kr(e){return e.getUTCDay()}function Ur(e,t){return Vo(ho.count(xo(e)-1,e),t,2)}function Ir(e,t){return Vo(e.getUTCFullYear()%100,t,2)}function Yr(e,t){return Vo((e=zr(e)).getUTCFullYear()%100,t,2)}function Lr(e,t){return Vo(e.getUTCFullYear()%1e4,t,4)}function Hr(e,t){var n=e.getUTCDay();return Vo((e=n>=4||0===n?mo(e):mo.ceil(e)).getUTCFullYear()%1e4,t,4)}function jr(){return"+0000"}function qr(){return"%"}function Or(e){return+e}function Wr(e){return Math.floor(+e/1e3)}function Xr(e){return new Date(e)}function Gr(e){return e instanceof Date?+e:+new Date(+e)}function Zr(e,t,n,i,a,o,r,s,c,g){var l=ga(),h=l.invert,d=l.domain,p=g(".%L"),u=g(":%S"),m=g("%I:%M"),f=g("%I %p"),y=g("%a %d"),v=g("%b %d"),w=g("%B"),k=g("%Y");function x(e){return(c(e)<e?p:s(e)<e?u:r(e)<e?m:o(e)<e?f:i(e)<e?a(e)<e?y:v:n(e)<e?w:k)(e)}return l.invert=function(e){return new Date(h(e))},l.domain=function(e){return arguments.length?d(Array.from(e,Gr)):d().map(Xr)},l.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},l.tickFormat=function(e,t){return null==t?x:g(t)},l.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(function(e,t){var n,i=0,a=(e=e.slice()).length-1,o=e[i],r=e[a];return r<o&&(n=i,i=a,a=n,n=o,o=r,r=n),e[i]=t.floor(o),e[a]=t.ceil(r),e}(n,e)):l},l.copy=function(){return ca(l,Zr(e,t,n,i,a,o,r,s,c,g))},l}Co=function(e){var t=e.dateTime,n=e.date,i=e.time,a=e.periods,o=e.days,r=e.shortDays,s=e.months,c=e.shortMonths,g=Bo(a),l=Ko(a),h=Bo(o),d=Ko(o),p=Bo(r),u=Ko(r),m=Bo(s),f=Ko(s),y=Bo(c),v=Ko(c),w={a:function(e){return r[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:rr,e:rr,f:hr,g:br,G:_r,H:sr,I:cr,j:gr,L:lr,m:dr,M:pr,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Or,s:Wr,S:ur,u:mr,U:fr,V:vr,w:wr,W:kr,x:null,X:null,y:xr,Y:Ar,Z:Rr,"%":qr},k={a:function(e){return r[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Tr,e:Tr,f:Dr,g:Yr,G:Hr,H:Fr,I:Mr,j:Er,L:Cr,m:$r,M:Pr,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Or,s:Wr,S:Sr,u:Nr,U:Vr,V:Br,w:Kr,W:Ur,x:null,X:null,y:Ir,Y:Lr,Z:jr,"%":qr},x={a:function(e,t,n){var i=p.exec(t.slice(n));return i?(e.w=u.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=h.exec(t.slice(n));return i?(e.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=y.exec(t.slice(n));return i?(e.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=m.exec(t.slice(n));return i?(e.m=f.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return _(e,t,n,i)},d:Go,e:Go,f:nr,g:qo,G:jo,H:Jo,I:Jo,j:Zo,L:tr,m:Xo,M:Qo,p:function(e,t,n){var i=g.exec(t.slice(n));return i?(e.p=l.get(i[0].toLowerCase()),n+i[0].length):-1},q:Wo,Q:ar,s:or,S:er,u:Io,U:Yo,V:Lo,w:Uo,W:Ho,x:function(e,t,i){return _(e,n,t,i)},X:function(e,t,n){return _(e,i,t,n)},y:qo,Y:jo,Z:Oo,"%":ir};function b(e,t){return function(n){var i,a,o,r=[],s=-1,c=0,g=e.length;for(n instanceof Date||(n=new Date(+n));++s<g;)37===e.charCodeAt(s)&&(r.push(e.slice(c,s)),null!=(a=$o[i=e.charAt(++s)])?i=e.charAt(++s):a="e"===i?" ":"0",(o=t[i])&&(i=o(n,a)),r.push(i),c=s+1);return r.push(e.slice(c,s)),r.join("")}}function A(e,t){return function(n){var i,a,o=Eo(1900,void 0,1);if(_(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(i=Mo(Eo(o.y,0,1))).getUTCDay(),i=a>4||0===a?ho.ceil(i):ho(i),i=co.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(a=(i=Fo(Eo(o.y,0,1))).getDay(),i=a>4||0===a?Oa.ceil(i):Oa(i),i=Ha.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?Mo(Eo(o.y,0,1)).getUTCDay():Fo(Eo(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Mo(o)):Fo(o)}}function _(e,t,n,i){for(var a,o,r=0,s=t.length,c=n.length;r<s;){if(i>=c)return-1;if(37===(a=t.charCodeAt(r++))){if(a=t.charAt(r++),!(o=x[a in $o?t.charAt(r++):a])||(i=o(e,n,i))<0)return-1}else if(a!=n.charCodeAt(i++))return-1}return i}return w.x=b(n,w),w.X=b(i,w),w.c=b(t,w),k.x=b(n,k),k.X=b(i,k),k.c=b(t,k),{format:function(e){var t=b(e+="",w);return t.toString=function(){return e},t},parse:function(e){var t=A(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=b(e+="",k);return t.toString=function(){return e},t},utcParse:function(e){var t=A(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Do=Co.format,Co.parse,Co.utcFormat,Co.utcParse;const Jr=function(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Qr(e){return"string"==typeof e?new je([document.querySelectorAll(e)],[document.documentElement]):new je([N(e)],He)}const es=Math.PI,ts=2*es,ns=1e-6,is=ts-ns;function as(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function os(){return new as}as.prototype=os.prototype={constructor:as,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,a,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(e,t,n,i,a){e=+e,t=+t,n=+n,i=+i,a=+a;var o=this._x1,r=this._y1,s=n-e,c=i-t,g=o-e,l=r-t,h=g*g+l*l;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>ns)if(Math.abs(l*s-c*g)>ns&&a){var d=n-o,p=i-r,u=s*s+c*c,m=d*d+p*p,f=Math.sqrt(u),y=Math.sqrt(h),v=a*Math.tan((es-Math.acos((u+h-m)/(2*f*y)))/2),w=v/y,k=v/f;Math.abs(w-1)>ns&&(this._+="L"+(e+w*g)+","+(t+w*l)),this._+="A"+a+","+a+",0,0,"+ +(l*d>g*p)+","+(this._x1=e+k*s)+","+(this._y1=t+k*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,i,a,o){e=+e,t=+t,o=!!o;var r=(n=+n)*Math.cos(i),s=n*Math.sin(i),c=e+r,g=t+s,l=1^o,h=o?i-a:a-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+g:(Math.abs(this._x1-c)>ns||Math.abs(this._y1-g)>ns)&&(this._+="L"+c+","+g),n&&(h<0&&(h=h%ts+ts),h>is?this._+="A"+n+","+n+",0,1,"+l+","+(e-r)+","+(t-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=g):h>ns&&(this._+="A"+n+","+n+",0,"+ +(h>=es)+","+l+","+(this._x1=e+n*Math.cos(a))+","+(this._y1=t+n*Math.sin(a))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const rs=os;function ss(e){return function(){return e}}function cs(e){this._context=e}function gs(e){return new cs(e)}function ls(e){return e[0]}function hs(e){return e[1]}function ds(e,t){var n=ss(!0),i=null,a=gs,o=null;function r(r){var s,c,g,l=(r=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(r)).length,h=!1;for(null==i&&(o=a(g=rs())),s=0;s<=l;++s)!(s<l&&n(c=r[s],s,r))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(c,s,r),+t(c,s,r));if(g)return o=null,g+""||null}return e="function"==typeof e?e:void 0===e?ls:ss(e),t="function"==typeof t?t:void 0===t?hs:ss(t),r.x=function(t){return arguments.length?(e="function"==typeof t?t:ss(+t),r):e},r.y=function(e){return arguments.length?(t="function"==typeof e?e:ss(+e),r):t},r.defined=function(e){return arguments.length?(n="function"==typeof e?e:ss(!!e),r):n},r.curve=function(e){return arguments.length?(a=e,null!=i&&(o=a(i)),r):a},r.context=function(e){return arguments.length?(null==e?i=o=null:o=a(i=e),r):i},r}function ps(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function us(e){this._context=e}function ms(e){return new us(e)}function fs(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ys(e,t){this._context=e,this._k=(1-t)/6}function vs(e,t){this._context=e,this._alpha=t}Array.prototype.slice,cs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},us.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ps(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ps(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI,ys.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:fs(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:fs(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new ys(e,t)}return n.tension=function(t){return e(+t)},n}(0),vs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(e,t,n){var i=e._x1,a=e._y1,o=e._x2,r=e._y2;if(e._l01_a>1e-12){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,a=(a*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>1e-12){var g=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*g+e._x1*e._l23_2a-t*e._l12_2a)/l,r=(r*g+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(i,a,o,r,e._x2,e._y2)}(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ws=function e(t){function n(e){return t?new vs(e,t):new ys(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ks(e){return e<0?-1:1}function xs(e,t,n){var i=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(i||a<0&&-0),r=(n-e._y1)/(a||i<0&&-0),s=(o*a+r*i)/(i+a);return(ks(o)+ks(r))*Math.min(Math.abs(o),Math.abs(r),.5*Math.abs(s))||0}function bs(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function As(e,t,n){var i=e._x0,a=e._y0,o=e._x1,r=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,a+s*t,o-s,r-s*n,o,r)}function _s(e){this._context=e}function Rs(e){this._context=e}function Ts(e){return new _s(e)}function Fs(e){return((e=Math.exp(e))+1/e)/2}_s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:As(this,this._t0,bs(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,As(this,bs(this,n=xs(this,e,t)),n);break;default:As(this,this._t0,n=xs(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(function(e){this._context=new Rs(e)}.prototype=Object.create(_s.prototype)).point=function(e,t){_s.prototype.point.call(this,t,e)},Rs.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,a,o){this._context.bezierCurveTo(t,e,i,n,o,a)}};const Ms=function e(t,n,i){function a(e,a){var o,r,s=e[0],c=e[1],g=e[2],l=a[0],h=a[1],d=a[2],p=l-s,u=h-c,m=p*p+u*u;if(m<1e-12)r=Math.log(d/g)/t,o=function(e){return[s+e*p,c+e*u,g*Math.exp(t*e*r)]};else{var f=Math.sqrt(m),y=(d*d-g*g+i*m)/(2*g*n*f),v=(d*d-g*g-i*m)/(2*d*n*f),w=Math.log(Math.sqrt(y*y+1)-y),k=Math.log(Math.sqrt(v*v+1)-v);r=(k-w)/t,o=function(e){var i,a=e*r,o=Fs(w),l=g/(n*f)*(o*(i=t*a+w,((i=Math.exp(2*i))-1)/(i+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[s+l*p,c+l*u,g*o/Fs(t*a+w)]}}return o.duration=1e3*r*t/Math.SQRT2,o}return a.rho=function(t){var n=Math.max(.001,+t),i=n*n;return e(n,i,i*i)},a}(Math.SQRT2,2,4),Es=e=>()=>e;function Cs(e,{sourceEvent:t,target:n,transform:i,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Ds(e,t,n){this.k=e,this.x=t,this.y=n}Ds.prototype={constructor:Ds,scale:function(e){return 1===e?this:new Ds(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Ds(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $s,Ps,Ss,Ns=new Ds(1,0,0);function Vs(e){e.stopImmediatePropagation()}function zs(e){e.preventDefault(),e.stopImmediatePropagation()}function Bs(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Ks(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Us(){return this.__zoom||Ns}function Is(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ys(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ls(e,t,n){var i=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],r=e.invertY(t[1][1])-n[1][1];return e.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r))}function Hs(e,t){return e.reduce((function(e,n){return e.map((e=>e.key)).includes(n[t])||e.push({key:n[t],value:[]}),e.find((e=>e.key==n[t])).value.push(n),e}),[])}function js(e){return function(e){let t=0;for(var n=0;n<e.length;n++)t+=e[n];return t}(e)/e.length}function qs(e,t){let n=new Date(e);return n.setDate(n.getDate()+t),n}function Os(e){return new Date(Math.min.apply(null,e))}function Ws(e){return new Date(Math.max.apply(null,e))}Ds.prototype;class Xs{constructor(e,t,n,i,a=!0){this.group=e,this.value=t,this.createDate=n,this.colour=i,this.selected=a;let o=Hs(t,"pseudonym");this.usersTotal=o.length,this.refTotal=t.length,this.mean=Math.round(js(t.map((e=>e.point)))),this.ruRate=Math.round(t.length/o.length*100)/100}}class Gs{constructor(e,t,n){this.refId=e.refId,this.timestamp=e.timestamp,this.pseudonym=e.pseudonym,this.point=e.point,this.text=e.text,this.colour=t,this.group=n}}!function(e){e.Sys="SYS",e.Usr="USR",e.Grp="GRP",e.Ref="REF"}($s||($s={})),function(e){e.Sys="SYS",e.Usr="USR",e.Grp="GRP",e.Ref="REF"}(Ps||(Ps={})),function(e){e.Ref="refId",e.Code="nodeCode"}(Ss||(Ss={}));class Zs{constructor(e,t,n){this.reflections=e,this.nodes=t,this.edges=n}}class Js extends Zs{constructor(e,t,n,i){if(super(e,t,n),this.groupByKey=i,i===Ss.Code){const e=this.groupByNodeCode();this.nodes=e.nodes,this.edges=e.edges}this.addRefNodesEdges()}groupByNodeCode(){return{nodes:this.reflections.map((e=>{let t=[];return Hs(this.nodes.filter((t=>t.refId===e.refId)),Ss.Code).forEach((n=>{t.push({idx:-this.reflections.length-1,nodeCode:n.key,nodeType:$s.Grp,refId:e.refId,expression:null!==n.value[0].name?`${n.value[0].name} : ${n.value.length}`:`${n.key} : ${n.value.length}`,properties:n.value[0].properties,total:n.value.length,selected:!0})})),t})).flat(),edges:[]}}addRefNodesEdges(){let e=this.reflections.map(((e,t)=>({idx:-t-1,nodeCode:e.refId.toString(),nodeType:$s.Ref,refId:e.refId,expression:e.timestamp.toDateString(),properties:{color:"#999999"},total:1}))),t=e.map(((e,t)=>this.nodes.filter((t=>t.refId.toString()==e.nodeCode)).map(((t,n)=>({idx:-n-1,edgeType:Ps.Ref,source:e,target:t})))));this.nodes=this.nodes.concat(e),this.edges=this.edges.concat(t.flat())}}class Qs{constructor(e,t,n,i){this.reflections=e.map((e=>{let n=JSON.parse(JSON.stringify(t.nodes.filter((t=>t.refId===e.refId))));n.forEach((e=>this.processColour(e,i)));let a=Hs(n,"nodeCode").map((t=>({key:t.key,name:null!==t.value[0].name?t.value[0].name:t.key,refId:e.refId,properties:t.value[0].properties,total:t.value.length,selected:!0})));return{refId:e.refId,timestamp:e.timestamp,point:e.point,text:e.text,nodes:n,nodeTags:a}})),t.nodes.forEach((e=>this.processColour(e,i))),this.analytics=t,this.pseudonym=n}processColour(e,t){return void 0===e.properties.color&&(e.properties={color:t(null!==e.name?e.name:e.nodeCode)}),e}}const ec=[{ngram:"'m a little bit worried",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel we are",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i think i would have",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think i can do",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think everyone in the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i probably would have",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i need to make sure",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i need to make a",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i need to focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i made a list of",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i know that this is",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i have worked with",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have to put in",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i have not been able",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have n't had much",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have had the chance",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have done a lot",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have been reading",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have been exposed to",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have always had a",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have a better understanding",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i had a chat with",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i think that my",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think that there is",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think that we will",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i will have to work",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"it has been a long",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"is due to the fact",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i will need to work",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i will have to do",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i think we are doing",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i was worried that",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i was working on",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i was very excited about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i was pretty happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i want to get a",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i think we need to",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"it was difficult for me",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i feel more confident in",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am feeling okay about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am excited about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am beginning to feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am a little nervous",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 've learnt a lot",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i 've done the",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i 'm very happy to",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm happy with the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm feeling very",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm feeling more confident",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm feeling good about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"have done a lot of",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"have been able to take",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"have a clear understanding of",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i believe that it",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i feel like this is",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel like i was",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel like an imposter",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel a lot more",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel a little better",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i do nâ€™t think that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i do believe that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i believe i can",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i am happy with the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am struggling a little",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am starting to feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am passionate about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am happy with what",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"it was a great idea",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"this week i learned",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"up with an idea that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"to work on the prototype",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to start working on the",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to start on the",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to put together a",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to make sure we have",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to make sure that i",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to have to do",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to go back to university",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to feel this way",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"to apply it to my",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"though i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"with the idea that the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"which has made me",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"where i was required to",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"where i want to be",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"when i started",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"what is the probability that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"was very happy with this",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"weeks i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"we were given a",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"we need to have",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"we have to come up",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"we have decided on a",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"we did n't have much",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"we decided to add more",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"like the idea of a",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"this week has been a",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"so i think i",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"so i do n't feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"really happy with how the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"past few weeks have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"on the idea",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"of the idea",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"now i am feeling",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"need to make a decision",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"need to ensure that i",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"made me think more about",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"made me feel a lot",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"m very happy with the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"the ideas that were",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"this was my first",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"this has been a very",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"thinking about the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"think we have",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the work i have produced",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"the way i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"the understanding of the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the idea that we",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the idea and",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the concept that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"that we were going",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"that stuck out to me",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"that i need to learn",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"had no idea what was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"as we had to",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"feel like we are all",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feeling a bit overwhelmed",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feeling a little nervous about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"as much as we could",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"as i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"as a team i believe",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"as a result i was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"but i think it could",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"feel like i am doing",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feel as though i can",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feel a lot more comfortable",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"decided as a group to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"decided to work on the",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"even though i was n't",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"a great idea as it",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"and we were all",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"am feeling pretty good about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"a little nervous about the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"am very happy with how",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"am very pleased with the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and am feeling",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i feel like we",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i thought it would",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"a better understanding of what",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"and the idea that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"a better idea of how",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think this is because",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i need to step up",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"how we were going to",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"'m very happy with how",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel like my",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i want to use",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i have decided to do",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i will make sure to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to keep up to date",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"we had decided",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i am feeling ok about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"we decided on our",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i 'm feeling a lot",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am more than happy",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"worried about my",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i also need to make",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"although i was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"imposter syndrome as i feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"decided to go with the",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i have been given the",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"next week i will have",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i was very impressed with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"we could have been more",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"n't think i would have",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"we had to do was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"need to make sure my",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"and it seems like",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"it made me feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"today was the first",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i began to think about",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"do not feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"individual performance strengths i believe",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"think i was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i was really happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"the past few weeks i",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"have a clear idea of",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the past few days i",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have been using the",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i feel much more confident",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"the past few weeks we",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"when i think about",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i have decided to take",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i think i should",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the first week i was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"the future i want to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"feel like i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i am very passionate about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am feeling excited about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"have to start",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"and i believe this",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i am feeling a bit",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"which i feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i need to learn to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i had previously",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"last week i was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"where i have",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"am very happy with my",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"was really happy with how",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"was really happy with the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i really enjoy",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"it made me think about",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"am really happy with how",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am feeling good about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i 'm happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i already have",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"the work we have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"trying to focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"made me think about the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i want to focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to work on this",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"for me as i was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i believe there",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think it is very",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"to focus on my",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"at first i was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i 'm happy with my",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"what i had",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have looked at",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have recently",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i am feeling much more",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am happy with it",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i was pretty happy",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"me feel a lot more",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and reflect on my own",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"happy with how my",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm happy with how",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i have started to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to get on top of",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i have experienced",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"want to learn more about",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"that i had to make",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"feel a lot more confident",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"will need to work on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"have had a lot of",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"to keep on top of",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i am very excited to",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel a sense of",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i need to work on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i was actually",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"left me feeling like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"we 've all been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"feeling like i am",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i felt confident",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i felt i was",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i had a lot",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"as a result we",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"a result of this i",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"personally i am happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"decided to come up with",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i need to improve on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"has made me reflect on",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"really got me thinking about",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the past few weeks have",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"need to improve on my",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"is the idea of",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i believe i did",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i thought that we",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think i just",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"this week i have started",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i think in",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"as i have done",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i think i will have",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the work i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"overall i think i",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i â€™m feeling",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feeling pretty good about the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"when i was doing",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i was always",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i now feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"where i had",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"what i have done",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i thought about the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"has really got me thinking",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i am feeling confident about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"idea of what i",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"and i believe we will",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the past week has been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"feeling pretty good about it",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i believe we are",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"but i think i have",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"overall i think we",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i was extremely happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i have always been a",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"a bit overwhelmed with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i learnt that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i have had the opportunity",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"the group i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i 've learned",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i had already",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have been enjoying the",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have worked in a",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have worked in schools",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"however i believe that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i had done",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i am a bit worried",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i also believe that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i am feeling really",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"came up with the idea",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i 'm feeling pretty good",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"will have to work on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i really want to learn",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i am reasonably happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"very happy with how we",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"overall i was very happy",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i am very happy",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am fairly happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am feeling pretty good",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"to focus on a",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i was very happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i found the idea of",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"idea of what we are",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"have a good idea of",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i am very happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am really happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"that i will have to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"going to focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"we need to focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"this makes me feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"very happy with how the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"to make sure we are",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"happy with how i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i was surprised by the",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"time to reflect on my",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i 've been working on",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i am really excited about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"going to work on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"feel like i 'm not",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"to focus on for the",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i 've been able",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"learning opportunity i want to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i would want to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i have never had",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"this past week has been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i want to be able",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"make me feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"a clear idea of what",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i have had a lot",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have had some",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i 'm feeling much better",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"at times i have",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"on how to improve the",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"need to work on my",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i was happy with my",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"which makes me feel better",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i have been teaching",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"we need to make",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"sure how i feel about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel pretty",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"am feeling a little stressed",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i just wish i had",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"when i have",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have been in",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"so i am feeling",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"this week we have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"and i have completed",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have been a",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"think i will have to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"while i have",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i really like the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"so far i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i felt like the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"this made me feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i really enjoyed working with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"am a little worried that",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and everyone was happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am a bit nervous",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i have been working on",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"it has made me",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have been working in",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i will make sure i",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"feeling good about the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i may have to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"allowed me to reflect on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i also want to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i have learnt that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"so far things have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i need to learn more",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"the idea of having a",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"and feel like i am",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"was thinking about",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i know that it is",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"but i believe that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i was working with",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i could have done better",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i could improve on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i did feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i do feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i do think that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i was quite happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i believe it is",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i wonder if the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i will focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"but i feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"my thoughts and ideas",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"really made me think about",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i feel more confident about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i now understand that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i understand that the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"and i am happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i really enjoyed this",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and decided on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"it occurred to me that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i should have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"am happy with how the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"that came to my mind",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"starting to feel a little",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"am feeling a little bit",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm still feeling",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"new ways of thinking",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"what i could have done",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"our team could have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i 'm feeling a little",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"what i have to do",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"overwhelmed at the moment",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"prove to myself that i",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"what has challenged your thinking",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"what could have been done",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"the team could have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have been reflecting on",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"was very happy with how",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm feeling a bit",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm a little nervous",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i believe the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i believe that this is",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"we need to improve on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i 'm very happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"overwhelmed with the amount of",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"this week i was able",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"to understand that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i could have worked more",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i definitely feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i had been thinking about",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"as i have had",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"makes me feel a little",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"could have been better",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i feel a bit better",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"am very happy with our",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i have developed",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"am a little worried about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i was worried about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"the overall idea of the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"am happy to",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"that i had been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i was feeling a bit",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"able to work on it",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i was a little overwhelmed",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feel a little more confident",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"which i believe to be",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i was told that i",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"am feeling a little more",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm happy with what",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"the group has worked well",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"feeling a little better about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i think we all",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"to work on to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i feel good about the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"had a group meeting before",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"'m feeling confident about the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i found myself thinking about",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think we were",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i really think",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"it makes me feel like",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i have decided to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to focus more on the",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i have come up with",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"need to work on is",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"that i have chosen",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i decided to work on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"have to come up with",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"on the concept of",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"it made me think that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i have a good idea",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i think that is",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"the idea of creating",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"as i believe",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"a better idea of the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"and i believe i",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i believe we have",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"what i think",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"however i think that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"a good idea of what",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"to reflect on how",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i believe that all",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i was there",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i feel better",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i am very satisfied with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"more time to focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i believe that we",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i feel a little bit",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel a lot better",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel about being a",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feel like i 'm on",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm a little concerned",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm feeling confident about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm quite happy with",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"furthermore i thought that my",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"have a clear idea",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"now i think",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"now i feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"have to focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"this week i have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"my team could have been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"connections between your own experiences",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i am happy with our",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"my point of view",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"what we have been doing",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"the students were engaged in",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i 'm starting to feel",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"to spend more time on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"provides evidence of your thinking",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"did n't feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i also feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"thinking about what",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i feel really",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"was happy with it",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"march 2015 we had our",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"team could have been more",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"am feeling a little overwhelmed",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i really enjoyed reading",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"to feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"the back of my mind",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"with the idea of the",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i feel like a",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel like everyone",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i knew that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"we have a good idea",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"and i feel i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"with the fact that i",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"am very happy with the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"we have all been",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"as i felt",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"was very happy with the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"spent a couple of hours",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i am feeling a lot",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"am a little bit stressed",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"made me feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feel i have a good",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"feel like i have a",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"overall i feel that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"anxious about the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"am a little nervous about",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i have had to",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"and i 'm feeling",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i have been thinking about",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i think it has",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i feel like it is",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel like if i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"'m a little worried that",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"and i have been working",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i think we 're",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"so i feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i found it interesting that",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"as i feel like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i 'm feeling like i",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"i feel that we are",category:"EP",name:"Epistemic",description:"Knowing, thinking, believing, imagining, wondering, knowledge and facts, ideas and thoughts"},{ngram:"i 've had to",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have really enjoyed the",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"we have worked",category:"RR",name:"The past",description:"Referring to previous events, looking back, relating to past experience, thinking about the past"},{ngram:"i have tried to use",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"that i need to do",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i have chosen to do",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"focus on the task at",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"i do n't feel like",category:"AF",name:"Affective",description:"Feelings and emotions, emotionally responding, reacting with feeling, expressing passion"},{ngram:"able to focus on",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"to focus on what",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"on what we need to",category:"VR",name:"A change",description:"Making a change, making a resolution, changing direction, turning from something old to something new, committing to a new approach"},{ngram:"unit",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"markdown",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"study",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"study plan",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"assignment",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"lecture",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"lecturer",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"video",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"week",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"coding",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"problem",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"feedback",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"questions",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"error",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"errors",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"issues",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"data",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"dataset",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"datasets",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"cleaning",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"model",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"process",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"prediction",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"predict",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"data analytics",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"data analytics cycle",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"qdavi",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"tutor",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"jupyter",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"notebook",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"insights",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"question",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"analysis",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"},{ngram:"visualisation",category:"DT",name:"Domain term",description:"Words and phrases related to the unit"}];class tc{constructor(e,t,n){this.group=e,this.value=t,this.createDate=n}transformData(){return new Xs(this.group,this.value.map((e=>({refId:parseInt(e.refId),timestamp:new Date(e.timestamp),pseudonym:e.pseudonym,point:parseInt(e.point),text:e.text}))),new Date(this.createDate),void 0,!1)}}class nc{constructor(e,t,n){this.pseudonym=t,this.reflections=e,this.analytics=void 0===n?this.createEmptyAnalytics():0!==n.analytics.nodes.length?n.analytics:this.createAnalytics(e)}transformData(e){let t=this.reflections.map((e=>({refId:parseInt(e.refId),timestamp:new Date(e.timestamp),point:parseInt(e.point),text:e.text})));return new Qs(t,new Zs(t,this.analytics.nodes,this.analytics.edges),this.pseudonym,e)}createAnalytics(e){let t=0;return{nodes:e.map((e=>{let n=[];return ec.forEach((i=>{const a=new RegExp(i.ngram,"i"),o=e.text.search(a);o>0&&(t+=1,n.push({idx:t,startIdx:o,endIdx:o+i.ngram.length-1,nodeCode:i.category,nodeType:$s.Sys,refId:parseInt(e.refId),expression:i.ngram,properties:{},labelType:"SYS",description:i.description,name:i.name,total:1,selected:!0}))})),n})).flat(),edges:[]}}createEmptyAnalytics(){return{nodes:[],edges:[]}}}class ic{constructor(e,t){this.id=e,this.content=t}}class ac{constructor(e){this.isDone=null!==localStorage.getItem("author-tutorial"),this.tutorial=this.appendTutorial(),this.tutorialData=e,this.slide=0,this.appendTutorialBackdrop()}appendTutorial(){return ri("body").classed("no-overflow",!0),ri(".wrapper").append("div").attr("class","tutorial")}appendTutorialBackdrop(){if(this.slide>=this.tutorialData.length||this.isDone)return void this.removeTutorial();window.scroll(0,0);const e=this.tutorialData[this.slide],t=ri(e.id).node();if(null===t)return void this.removeTutorial();const n=t.getBoundingClientRect();class i{constructor(e,t,n,i){this.top=e,this.left=t,this.width=n,this.height=i}}window.scroll(0,n.top+window.scrollY-200);let a=[new i("0px","0px","100%",n.top+window.scrollY+"px"),new i(n.bottom+window.scrollY+"px","0px","100%","100%"),new i(n.top+window.scrollY+"px","0px",n.left+"px",n.height+"px"),new i(n.top+window.scrollY+"px",n.right+"px","100%",n.height+"px")];this.tutorial.selectAll(".tutorial-backdrop").data(a).join((e=>e.append("div").attr("class","tutorial-backdrop").style("top",(e=>e.top)).style("left",(e=>e.left)).style("width",(e=>e.width)).style("height",(e=>e.height))),(e=>e.style("top",(e=>e.top)).style("left",(e=>e.left)).style("width",(e=>e.width)).style("height",(e=>e.height))),(e=>e.remove())),this.appendTutorialContent(n,e.content)}appendTutorialContent(e,t){let n=!0,i=e.left+e.width-200;e.left+50>window.innerWidth/2&&(n=!1),e.left<window.innerWidth/4&&(i+=250),e.left>3*window.innerWidth/4&&(i-=200),this.tutorial.selectAll(".tutorial-content").empty()?(this.tutorial.append("div").attr("class","tutorial-content").style("top",e.top+window.scrollY-50+"px").style("left",i+"px").call((e=>e.append("div").attr("class","row").call((e=>e.append("div").attr("class","col-md-12").html(t))).call((e=>e.append("div").attr("class","col-md-5 mt-2"))).call((e=>e.append("div").attr("class","col-md-7 d-flex mt-2").call((e=>e.append("button").attr("class","btn btn-success d-block w-50 mx-1").html("Next").on("click",(()=>{this.slide=this.slide+1,this.appendTutorialBackdrop()})))).call((e=>e.append("button").attr("class","btn btn-warning d-block w-50 mx-1").html("Skip").on("click",(()=>this.removeTutorial())))))))),n||this.tutorial.select(".tutorial-content").style("left",e.left-this.tutorial.select(".tutorial-content").node().getBoundingClientRect().width-50+"px"),this.drawArrow(e,n)):(this.tutorial.select(".tutorial-content").style("top",e.top+window.scrollY-50+"px").style("left",n?e.left+e.width+50+"px":e.left-this.tutorial.select(".tutorial-content").node().getBoundingClientRect().width-50+"px"),this.tutorial.select(".col-md-12").html(t),this.tutorial.select(".tutorial-arrow").remove(),this.drawArrow(e,n))}drawArrow(e,t){let n=this.tutorial.append("div").attr("class","tutorial-arrow").style("top",e.top+window.scrollY-50+"px").style("left",t?e.left+e.width/4+"px":this.tutorial.select(".tutorial-content").node().getBoundingClientRect().left+this.tutorial.select(".tutorial-content").node().getBoundingClientRect().width+"px").style("width",e.width/4*3+50+"px").style("height","50px"),i=n.append("svg").attr("viewBox",`0 0 ${n.node().getBoundingClientRect().width} ${n.node().getBoundingClientRect().height}`);i.append("defs").append("marker").attr("id","arrow-head").attr("markerWidth",5).attr("markerHeight",5).attr("refX",2).attr("refY",2).attr("orient","auto").append("path").attr("d","M0,0 L0,4 L4,2 L0,0").attr("class","arrow-head");let a=Ra().domain([0,100]).range([0,n.node().getBoundingClientRect().width]),o=Ra().domain([100,0]).range([0,n.node().getBoundingClientRect().height]),r=ds().x((e=>a(e.x))).y((e=>o(e.y))).curve(ws);i.append("path").attr("d",r(t?[{x:95,y:80},{x:25,y:70},{x:25,y:25}]:[{x:0,y:80},{x:75,y:70},{x:75,y:25}])).attr("class","arrow").attr("marker-end","url(#arrow-head)")}removeTutorial(){ri("body").classed("no-overflow",!1),window.scroll(0,0),localStorage.setItem("author-tutorial","true"),this.tutorial.remove()}}class oc{constructor(e){this.chart=e}enableClick(e){this.chart.elements.content.on("click",e)}removeClick(){this.clicked=!1,this.chart.elements.contentContainer.selectAll(".click-text").remove(),this.chart.elements.contentContainer.selectAll(".click-line").remove(),this.chart.elements.contentContainer.selectAll(".click-container").remove(),this.chart.elements.content.classed("clicked",!1),this.chart.elements.content.classed("not-clicked",!1),this.chart.elements.content.classed("main",!1)}comparativeText(e){let t,n="click-text",i="";return t="number"!=typeof e.clickData.stat&&"number"!=typeof e.data.stat?e.clickData.stat.value-e.data.stat.value:e.clickData.stat-e.data.stat,t<0?(n+=" positive",i="+"):t>0?(n+=" negative",i="-"):n+=" black",null!=e.clickData.group&&null!=e.data.group?[n,`${i}${e.clickData.group==e.data.group&&0==t?"number"!=typeof e.clickData.stat?e.clickData.stat.value:e.clickData.stat:Math.abs(t)}`]:[n,`${i}${Math.abs(t)}`]}}class rc{constructor(e,t){this.label=null==e?"":e,this.value=null==t?0:t}}class sc{constructor(e){this.chart=e}enableTooltip(e,t){this.chart.elements.content.on("mouseenter",e),this.chart.elements.content.on("mouseleave",t)}removeTooltip(){this.chart.elements.contentContainer.selectAll(".tooltip-container").remove(),this.chart.elements.contentContainer.selectAll(".tooltip-line").remove()}appendTooltipContainer(){this.chart.elements.contentContainer.append("g").attr("class","tooltip-container")}appendTooltipText(e,t=null){let n=this.chart.elements.contentContainer.select(".tooltip-container").append("rect").attr("class","tooltip-box").attr("rx",5).attr("ry",5),i=this.chart.elements.contentContainer.select(".tooltip-container").append("text").attr("class","tooltip-text title").attr("x",10).text(e),a=i.node().getBBox().height;return i.attr("y",a),null!=t&&t.forEach(((e,t)=>{i.append("tspan").attr("class","tooltip-text").attr("y",a*(t+2)).attr("x",15).text(`${e.label}: ${e.value}`)})),n.attr("width",i.node().getBBox().width+20).attr("height",i.node().getBBox().height+5)}positionTooltipContainer(e,t){this.chart.elements.contentContainer.select(".tooltip-container").attr("transform",`translate(${e}, ${t})`).transition().style("opacity",1)}appendLine(e,t,n,i,a){this.chart.elements.contentContainer.append("line").attr("class","tooltip-line").attr("x1",e).attr("y1",t).attr("x2",n).attr("y2",i).style("stroke",a)}}class cc{constructor(e,t,n,i,a){this.id=e,this.label=t,this.scale=this.setScale(n,i),this.axis=this.setAxis(this.scale,a)}setScale(e,t){return Xi().domain(e).rangeRound(t).padding(.25)}setAxis(e,t){switch(t){case"right":return C(e);case"left":return $(e);default:return D(e)}}transition(e){this.scale.domain(e),ri(`#${this.id} .x-axis`).transition().duration(750).call(this.axis)}withinRange(e){const t=this.scale.range(),n=Math.min.apply(null,t),i=Math.max.apply(null,t);return e<n?n:e>i?i:e}}class gc{constructor(e,t,n,i,a,o=!0){if(this.id=e,this.label=t,this.scale=this.setScale(n,i),this.axis=this.setAxis(this.scale,a),o){let e=new Map;e.set(0,"distressed"),e.set(50,"going ok"),e.set(100,"soaring"),this.axis.tickValues([0,25,50,75,100]).tickFormat((t=>e.get(t)))}}setScale(e,t){return Ra().domain([this.getMinDomain(e),Math.max.apply(null,e)]).range(t)}getMinDomain(e){return Math.min.apply(null,e)<0?0:Math.min.apply(null,e)}setAxis(e,t){switch(t){case"right":return C(e);case"bottom":return D(e);default:return $(e)}}transition(e){this.scale.domain(e),ri(`#${this.id} .y-axis`).transition().duration(750).call(this.axis)}withinRange(e){const t=this.scale.range(),n=Math.min.apply(null,t),i=Math.max.apply(null,t);return e<n?n:e>i?i:e}setThresholdAxis(e,t){return C(this.scale).tickValues([e,t]).tickFormat((n=>n==e?"Distressed":n==t?"Soaring":""))}}class lc{constructor(e,t,n,i){this.id=e,this.label=t,this.scale=this.setScale(n,i),this.axis=D(this.scale)}setScale(e,t){return function(){return Ui.apply(Zr(Ro,To,no,eo,qa,Ha,Ya,Ua,Ba,Do).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain(n(e)).range(t)}transition(e){this.scale.domain(e),ri(`#${this.id} .x-axis`).transition().duration(750).call(this.axis)}withinRange(e){const t=this.scale.range(),n=Math.min.apply(null,t),i=Math.max.apply(null,t);return e<n?n:e>i?i:e}}class hc{constructor(e,t,n,i,a){this.id=e,this.width=t,this.height=n,this.padding=i,this.svg=this.appendSVG(a),this.contentContainer=this.appendContentContainer()}appendSVG(e){return ri(`#${this.id} ${null==e?".chart-container":"."+e}`).append("svg").attr("class","chart-svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${this.width} ${this.height}`)}appendContentContainer(){let e=this.svg.append("g").attr("class","content-container").attr("transform",`translate(${this.padding.yAxis}, ${this.padding.top})`).attr("clip-path",`url(#clip-${this.id})`);return e.append("rect").attr("class","zoom-rect").attr("width",this.width-this.padding.yAxis-this.padding.right).attr("height",this.height-this.padding.xAxis-this.padding.top),e.append("clipPath").attr("id",`clip-${this.id}`).append("rect").attr("x",1).attr("width",this.width-this.padding.yAxis).attr("height",this.height-this.padding.xAxis-this.padding.top),e}}class dc extends hc{constructor(e,t,n,i,a,o,r){super(e,t,n,i,r),this.xAxis=this.appendXAxis(a),this.appendXAxisLabel(a),this.yAxis=this.appendYAxis(o),this.appendYAxisLabel(o)}appendXAxis(e){return this.svg.append("g").attr("transform",`translate(${this.padding.yAxis}, ${this.height-this.padding.xAxis})`).attr("class","x-axis").attr("clip-path",`url(#clip-${this.id})`).call(e.axis)}appendXAxisLabel(e){return this.svg.append("g").attr("class","x-label-container").attr("transform","translate("+(this.svg.select(".x-axis").node().getBBox().width/2+this.padding.yAxis)+", "+(this.height-this.padding.xAxis+2*this.svg.select(".x-axis").node().getBBox().height)+")").append("text").attr("class","x-label-text").attr("text-anchor","middle").text(e.label)}appendYAxis(e){return this.svg.append("g").attr("transform",`translate(${this.padding.yAxis}, ${this.padding.top})`).attr("class","y-axis").call(e.axis)}appendYAxisLabel(e){return this.svg.append("g").attr("class","y-label-container").attr("transform","translate("+(this.padding.yAxis-this.svg.select(".y-axis").node().getBBox().width)+", "+(this.padding.top+this.svg.select(".y-axis").node().getBBox().height/2)+") rotate(-90)").append("text").attr("class","y-label-text").attr("text-anchor","middle").text(e.label)}}class pc{get isLoading(){return this._isLoading}set isLoading(e){this._isLoading=e,this.isLoading?this.spinner=this.appendDiv():this.removeDiv()}constructor(e){this.chart=e}appendDiv(){if(null!==document.querySelector(`#${this.chart.id} .loader`))return;let e=document.querySelector(`#${this.chart.id} .chart-container`),t=document.createElement("div");t.setAttribute("class","loader"),t.style.height=`${this.chart.elements.contentContainer.node().getBoundingClientRect().height}px`,t.style.width=`${this.chart.elements.contentContainer.node().getBoundingClientRect().width}px`,t.style.top=`${this.chart.padding.top}px`,t.style.left=`${this.chart.padding.yAxis}px`;let n=document.createElement("div");n.setAttribute("class","loader-inner");for(var i=0;i<5;i++){let e=document.createElement("div");e.setAttribute("class","loader-line-wrap");let t=document.createElement("div");t.setAttribute("class","loader-line"),e.appendChild(t),n.appendChild(e)}t.appendChild(n);let a=document.createElement("button");return a.setAttribute("class","btn btn-sm btn-danger cancel-loading"),a.innerHTML='<i class="fas fa-window-close"></i>',a.addEventListener("click",(()=>this.isLoading=!1)),t.appendChild(a),e.appendChild(t),t}removeDiv(){this.spinner.remove()}}class uc{logUIEvent(e){fetch("/analytics/logUIevent",{method:"POST",body:JSON.stringify({event:e}),headers:{"Content-type":"application/json"}}).then((e=>e.status)).then((e=>{200!==e?console.log(`Error response status ${e}`):console.log("Event registered successfully")}))}}class mc{constructor(e,t="chart-container",n){this.logger=new uc,this.id=e;let i=function(e){return document.querySelector(e).getBoundingClientRect()}(`#${e} .${t}`);this.width=i.width,this.height=i.height,this.padding=void 0!==n?n:new fc}}class fc{constructor(e,t,n,i){this.xAxis=null==e?40:e,this.yAxis=null==t?75:t,this.top=null==n?5:n,this.right=null==i?0:i}}class yc{constructor(e){this.isOpen=!1,this.id=`${e}-help`,this.button=document.querySelector(`#${e} .card-title button`),this.icon=this.button.querySelector(`#${e} .card-title button i`)}helpPopover(e){const t=this;null!==this.button&&this.button.addEventListener("click",(function(){t.isOpen?t.removeHelp():(t.isOpen=!0,t.createPopover(e),this.getBoundingClientRect().left-t.popover.getBoundingClientRect().width>0?t.popover.style.left=this.getBoundingClientRect().left-t.popover.getBoundingClientRect().width+"px":t.popover.style.left=`${this.getBoundingClientRect().right}px`,t.toogleIcon())}))}removeHelp(){var e;this.isOpen=!1,null===(e=this.popover)||void 0===e||e.remove(),this.popover=void 0,this.toogleIcon()}createPopover(e){const t=document.createElement("div");t.setAttribute("id",this.id),t.setAttribute("class","popover fade show");const n=null===this.button?window.pageYOffset:window.pageYOffset+this.button.getBoundingClientRect().top;return t.style.top=`${n}px`,t.appendChild(this.createArrow()),t.appendChild(this.createPopoverBody(e)),document.querySelector("body").appendChild(t),this.popover=t,t}createArrow(){const e=document.createElement("div");return e.setAttribute("class","arrow"),e.style.top="6px",e}createPopoverBody(e){const t=document.createElement("div");return t.setAttribute("class","popover-body"),t.innerHTML=e,t}toogleIcon(){this.icon.setAttribute("class",this.isOpen?"fas fa-window-close":"fas fa-question-circle")}}class vc extends mc{constructor(e,t,n=!0,i){super(e),n||(this.padding.yAxis=40),this.y=new gc(this.id,n?"Reflection Point":"",n?[0,100]:i,[this.height-this.padding.xAxis-this.padding.top,0],"left",n),this.x=new cc(this.id,"Group Code",t,[0,this.width-this.padding.yAxis-this.padding.right]),this.elements=new dc(this.id,this.width,this.height,this.padding,this.x,this.y),this.loading=new pc(this),this.help=new yc(this.id)}renderError(e){console.error(e),this.elements.contentContainer.text(`There was an error rendering the chart. ${e}`)}}class wc extends mc{constructor(e,t,n){super(e,void 0,n),this.y=new gc(this.id,"Reflection Point",[0,100],[this.height-this.padding.xAxis-this.padding.top,0],"left"),this.x=new lc(this.id,"Time",t,[0,this.width-this.padding.yAxis]),this.elements=new dc(this.id,this.width,this.height,this.padding,this.x,this.y),this.loading=new pc(this),this.help=new yc(this.id)}renderError(e){console.error(e),this.elements.contentContainer.text(`There was an error rendering the chart. ${e}`)}}class kc extends mc{constructor(e,t,n){super(e,t,new fc(40,75,20,10)),this.y=new gc(this.id,"Reflection Point",[0,100],[this.height-this.padding.xAxis-this.padding.top,0],"left"),this.x=new lc(this.id,"Time",n,[0,this.width-this.padding.yAxis-this.padding.right]),this.elements=new dc(this.id,this.width,this.height,this.padding,this.x,this.y,t),this.elements.contentContainer.append("clipPath").attr("id",`clip-${this.id}-nodes`).append("rect").attr("height",this.height).attr("width",this.width).attr("y",-this.padding.top).attr("x",-this.padding.yAxis),this.elements.contentContainer.attr("clip-path",`url(#clip-${this.id}-nodes)`),this.loading=new pc(this),this.help=new yc(this.id)}renderError(e){console.error(e),this.elements.contentContainer.text(`There was an error rendering the chart. ${e}`)}}class xc extends vc{get data(){return this._data}set data(e){this._data=e.filter((e=>e.selected)),this.x.scale.domain(e.filter((e=>e.selected)).map((e=>e.group))),this.bandwidth=Ra().range([0,this.x.scale.bandwidth()]).domain([-100,100]),this.x.transition(this.data.map((e=>e.group))),this.render(),void 0!==this.extend&&this.extend()}constructor(e){super("histogram",e.map((e=>e.group))),this.tooltip=new sc(this),this.padding=new fc(40,75,5,85),this.x=new cc(this.id,"Group Code",e.map((e=>e.group)),[0,this.width-this.padding.yAxis-this.padding.right]),ri(`#${this.id} svg`).remove(),this.thresholdAxis=this.y.setThresholdAxis(30,70),this.elements=new bc(this.id,this.width,this.height,this.padding,this.x,this.y,this.thresholdAxis),this.clicking=new Ac(this),this.data=e}getBinData(e){const t=this.elements.getThresholdsValues(this.x,this.y),i=function(){var e=h,t=n,i=v;function o(a){Array.isArray(a)||(a=Array.from(a));var o,r,s=a.length,c=new Array(s);for(o=0;o<s;++o)c[o]=e(a[o],o,a);var l=t(c),h=l[0],d=l[1],p=i(c,h,d);if(!Array.isArray(p)){const e=d,i=+p;if(t===n&&([h,d]=function(e,t,n){let i;for(;;){const a=f(e,t,n);if(a===i||0===a||!isFinite(a))return[e,t];a>0?(e=Math.floor(e/a)*a,t=Math.ceil(t/a)*a):a<0&&(e=Math.ceil(e*a)/a,t=Math.floor(t*a)/a),i=a}}(h,d,i)),(p=m(h,d,i))[p.length-1]>=d)if(e>=d&&t===n){const e=f(h,d,i);isFinite(e)&&(e>0?d=(Math.floor(d/e)+1)*e:e<0&&(d=(Math.ceil(d*-e)+1)/-e))}else p.pop()}for(var u=p.length;p[0]<=h;)p.shift(),--u;for(;p[u-1]>d;)p.pop(),--u;var y,v=new Array(u+1);for(o=0;o<=u;++o)(y=v[o]=[]).x0=o>0?p[o-1]:h,y.x1=o<u?p[o]:d;for(o=0;o<s;++o)null!=(r=c[o])&&h<=r&&r<=d&&v[g(p,r,0,u)].push(a[o]);return v}return o.value=function(t){return arguments.length?(e="function"==typeof t?t:l(t),o):e},o.domain=function(e){return arguments.length?(t="function"==typeof e?e:l([e[0],e[1]]),o):t},o.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:Array.isArray(e)?l(a.call(e)):l(e),o):i},o}().domain([0,100]).thresholds([0,t[0],t[1]]),o=Hs(e.value,"pseudonym").map((e=>({pseudonym:e.key,mean:js(e.value.map((e=>e.point)))})));return i(o.map((e=>e.mean))).map((t=>new _c(e.value.filter((e=>o.filter((e=>t.includes(e.mean))).map((e=>e.pseudonym)).includes(e.pseudonym))),e.group,e.colour,t,Math.round(t.length/o.length*100))))}render(){if(ri(`#${this.id} .card-subtitle`).html(1===this.data.length?`Filtering by <span class="badge rounded-pill bg-info pointer">${this.data[0].group} <i class="fas fa-window-close"></i></span>`:0===this.data.length?"Add group codes form the left sidebar":""),this.elements.contentContainer.selectAll(`.${this.id}-histogram-container`).data(this.data).join((e=>e.append("g").attr("class",`${this.id}-histogram-container`).attr("transform",(e=>`translate(${this.x.scale(e.group)}, 0)`)).call((e=>e.selectAll(".histogram-rect").data((e=>this.getBinData(e))).enter().append("rect").attr("id",`${this.id}-data`).attr("class","histogram-rect").attr("x",(e=>this.bandwidth(-e.percentage))).attr("y",(e=>this.y.scale(e.bin.x0))).attr("height",0).attr("width",(e=>this.bandwidth(e.percentage)-this.bandwidth(-e.percentage))).style("stroke",(e=>e.colour)).style("fill",(e=>e.colour)).transition().duration(750).attr("y",(e=>this.y.scale(e.bin.x1))).attr("height",(e=>this.y.scale(e.bin.x0)-this.y.scale(e.bin.x1)))))),(e=>e.call((e=>e.selectAll(".histogram-rect").data((e=>this.getBinData(e))).join((e=>e),(e=>e.style("stroke",(e=>e.colour)).style("fill",(e=>e.colour)).call((e=>e.transition().duration(750).attr("x",(e=>this.bandwidth(-e.percentage))).attr("y",(e=>this.y.scale(e.bin.x1))).attr("height",(e=>this.y.scale(e.bin.x0)-this.y.scale(e.bin.x1))).attr("width",(e=>this.bandwidth(e.percentage)-this.bandwidth(-e.percentage)))))),(e=>e)))).call((e=>e.transition().duration(750).attr("transform",(e=>`translate(${this.x.scale(e.group)}, 0)`))))),(e=>e.call((e=>e.selectAll(".histogram-rect").style("fill","#cccccc").style("stroke","#b3b3b3").transition().duration(250).attr("y",(e=>this.y.scale(e.bin.x0))).attr("height",0))).call((e=>e.transition().duration(250).remove())))),this.elements.content=this.elements.contentContainer.selectAll(`#${this.id}-data`),this.tooltip.enableTooltip(((e,t)=>{this.tooltip.appendTooltipContainer();let n=this.tooltip.appendTooltipText(0==t.bin.x0?"Distressed":100==t.bin.x1?"Soaring":"GoingOK",[new rc("Total",`${t.bin.length} (${t.percentage}%)`)]);this.tooltip.positionTooltipContainer(this.x.scale(t.group)+this.bandwidth(t.percentage),t.bin.x1>25?this.y.scale(t.bin.x1):this.y.scale(t.bin.x0)-n.node().getBBox().height)}),(()=>{this.elements.svg.select(".tooltip-container").transition().style("opacity",0),this.tooltip.removeTooltip()})),this.clicking.clicked){const e=this.elements.contentContainer.select(".clicked").datum();this.clicking.removeClick(),this.clicking.appendThresholdPercentages(this.data,e)}}}class bc extends dc{constructor(e,t,n,i,a,o,r,s){super(e,t,n,i,a,o,s);let c=this.getThresholdsValues(a,o);this.appendThresholdAxis(r),this.appendThresholdIndicators(c,o),this.appendThresholdLabel()}appendThresholdAxis(e){return this.contentContainer.append("g").attr("transform",`translate(${this.width-this.padding.yAxis-this.padding.right}, 0)`).attr("class","threshold-axis").call(e)}appendThresholdLabel(){let e=this.svg.append("g").attr("class","threshold-label-container");return e.append("text").attr("class","y-label-text").attr("text-anchor","middle").text("Thresholds"),e.attr("transform",`translate(${this.width-this.padding.right+this.contentContainer.select(".threshold-axis").node().getBBox().width+e.node().getBBox().height}, ${this.padding.top+this.svg.select(".y-axis").node().getBBox().height/2}) rotate(-90)`),e}appendThresholdIndicators(e,t){this.contentContainer.selectAll(".threshold-indicator-container").data(e).enter().append("g").attr("class","threshold-indicator-container").classed("distressed",(e=>e<50)).classed("soaring",(e=>e>50)).attr("transform",(e=>`translate(${this.width-this.padding.yAxis-this.padding.right+5}, ${e<50?t.scale(e)+25:t.scale(e)-15})`)).call((e=>e.append("rect").attr("class","threshold-indicator-box").attr("rx",5).attr("ry",5).classed("distressed",(e=>e<50)).classed("soaring",(e=>e>50)))).call((e=>e.append("text").attr("class","threshold-indicator-text").attr("x",5).text((e=>e)))).call((e=>e.selectAll("rect").attr("width",e.select("text").node().getBBox().width+10).attr("height",e.select("text").node().getBBox().height+5).attr("y",-e.select("text").node().getBBox().height))),this.contentContainer.selectAll(".threshold-line").data(e).enter().append("line").attr("class","threshold-line").classed("distressed",(e=>e<50)).classed("soaring",(e=>e>50)).attr("x1",0).attr("x2",this.width-this.padding.yAxis-this.padding.right).attr("y1",(e=>t.scale(e))).attr("y2",(e=>t.scale(e)))}getThresholdsValues(e,t){let n=[30,70],i=this.contentContainer.select(".threshold-line.distressed");i.empty()||(n[0]=t.scale.invert(parseInt(i.attr("y1"))));let a=this.contentContainer.select(".threshold-line.soaring");return a.empty()||(n[1]=t.scale.invert(parseInt(a.attr("y1")))),n}}class Ac extends oc{appendThresholdPercentages(e,t){let n=this.chart.elements.getThresholdsValues(this.chart.x,this.chart.y),i=n[0],a=n[1];this.clickedBin=0===t.bin.x0?"distressed":100===t.bin.x1?"soaring":"going ok",this.chart.elements.content.classed("clicked",(e=>e.group==t.group&&t.bin.length-e.bin.length==0)),this.chart.elements.contentContainer.selectAll(".click-container").data(e).join((e=>e.append("g").attr("class","click-container").attr("transform",(e=>`translate(${this.chart.x.scale(e.group)+this.chart.x.scale.bandwidth()/2}, 0)`)).call((e=>e.selectAll("text").data((e=>this.chart.getBinData(e))).enter().append("text").attr("class","click-text black").attr("y",(e=>0==e.bin.x0?this.chart.y.scale(0+i/2):100==e.bin.x1?this.chart.y.scale(a+(100-a)/2):this.chart.y.scale(50))).text((e=>`${e.percentage}% `)).append("tspan").attr("class",(e=>this.comparativeText(new Rc(t.percentage,e.percentage,t.group,e.group))[0])).text((e=>e.group!=t.group&&e.bin.x0==t.bin.x0&&e.bin.x1==t.bin.x1?`(${this.comparativeText(new Rc(t.percentage,e.percentage,t.group,e.group))[1]})`:""))))),(e=>e.call((e=>e.transition().duration(750).attr("transform",(e=>`translate(${this.chart.x.scale(e.group)+this.chart.x.scale.bandwidth()/2}, 0)`)))).call((e=>e.selectAll("text").data((e=>this.chart.getBinData(e))).join((e=>e),(e=>e.attr("y",(e=>0==e.bin.x0?this.chart.y.scale(0+i/2):100==e.bin.x1?this.chart.y.scale(a+(100-a)/2):this.chart.y.scale(50))).text((e=>`${e.percentage}% `)).append("tspan").attr("class",(e=>this.comparativeText(new Rc(t.percentage,e.percentage,t.group,e.group))[0])).text((e=>e.group!=t.group&&e.bin.x0==t.bin.x0&&e.bin.x1==t.bin.x1?`(${this.comparativeText(new Rc(t.percentage,e.percentage,t.group,e.group))[1]})`:""))),(e=>e))))),(e=>e.remove()))}}class _c extends Xs{constructor(e,t,n,i,a){super(t,e,void 0,n),this.bin=i,this.percentage=a}}class Rc{constructor(e,t,n,i){this.clickData={stat:e,group:n},this.data={stat:t,group:i}}}class Tc extends vc{get data(){return this._data}set data(e){this._data=e.filter((e=>e.selected)),0!=this.data.length&&(this.x.transition(this.data.map((e=>e.group))),this.y.transition([0,Math.max.apply(null,this.data.map((e=>e.usersTotal)))])),this.render(),void 0!==this.extend&&this.extend()}constructor(e){super("users",e.map((e=>e.group)),!1,e.map((e=>e.usersTotal))),this.tooltip=new sc(this),this.clicking=new oc(this),this.data=e}render(){let e=this;ri(`#${e.id} .card-title span`).html(),ri(`#${e.id} .card-subtitle`).html(e.data.length<=1?"Add group codes from the left sidebar":"Click a group code to filter"),e.elements.content=e.elements.contentContainer.selectAll(`#${e.id}-data`).data(e.data).join((t=>t.append("rect").attr("id",`${e.id}-data`).attr("class","bar").attr("y",(t=>e.y.scale(0))).attr("x",(t=>e.x.scale(t.group))).attr("width",e.x.scale.bandwidth()).attr("height",0).style("stroke",(e=>e.colour)).style("fill",(e=>e.colour)).call((t=>t.transition().duration(750).attr("height",(t=>e.y.scale(0)-e.y.scale(t.usersTotal))).attr("y",(t=>e.y.scale(t.usersTotal)))))),(t=>t.style("stroke",(e=>e.colour)).style("fill",(e=>e.colour)).call((t=>t.transition().duration(750).attr("y",(t=>e.y.scale(t.usersTotal))).attr("x",(t=>e.x.scale(t.group))).attr("width",e.x.scale.bandwidth()).attr("height",(t=>e.y.scale(0)-e.y.scale(t.usersTotal)))))),(t=>t.style("fill","#cccccc").style("stroke","#b3b3b3").call((t=>t.transition().duration(250).attr("y",(t=>e.y.scale(0))).attr("height",0).remove())))),e.tooltip.enableTooltip((function(t,n){if(ri(this).attr("class").includes("clicked"))return;e.tooltip.appendTooltipContainer();let i=e.tooltip.appendTooltipText(n.group,[new rc("Users",n.usersTotal),new rc("Reflections",n.refTotal)]);e.tooltip.positionTooltipContainer(function(t,n){let i=e.x.scale(t)+e.x.scale.bandwidth();return e.width-e.padding.yAxis<i+n.node().getBBox().width?i-e.x.scale.bandwidth()-n.node().getBBox().width:i}(n.group,i),function(t,n){let i=e.y.scale(t)+n.node().getBBox().height/2;return e.y.scale.invert(i)<0?e.y.scale(t+e.y.scale.invert(i)):i}(n.usersTotal,i))}),(function(){e.elements.svg.select(".tooltip-container").transition().style("opacity",0),e.tooltip.removeTooltip()}))}}class Fc{get k(){return this._k}set k(e){this._k=e<1?1:e>5?5:e,this.zoom.scaleTo(this.chart.elements.contentContainer.select(".zoom-rect"),this.k),this.chart.elements.contentContainer.select(".zoom-rect").classed("active",this.k>1)}constructor(e){this.chart=e,this.zoom=function(){var e,t,n,i=Bs,a=Ks,o=Ls,r=Is,s=Ys,c=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],l=250,h=Ms,d=et("start","zoom","end"),p=500,u=0,m=10;function f(e){e.property("__zoom",Us).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",R).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(c[0],Math.min(c[1],t)))===e.k?e:new Ds(t,e.x,e.y)}function v(e,t,n){var i=t[0]-n[0]*e.k,a=t[1]-n[1]*e.k;return i===e.x&&a===e.y?e:new Ds(e.k,i,a)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function k(e,t,n,i){e.on("start.zoom",(function(){x(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(i).end()})).tween("zoom",(function(){var e=this,o=arguments,r=x(e,o).event(i),s=a.apply(e,o),c=null==n?w(s):"function"==typeof n?n.apply(e,o):n,g=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),l=e.__zoom,d="function"==typeof t?t.apply(e,o):t,p=h(l.invert(c).concat(g/l.k),d.invert(c).concat(g/d.k));return function(e){if(1===e)e=d;else{var t=p(e),n=g/t[2];e=new Ds(n,c[0]-t[0]*n,c[1]-t[1]*n)}r.zoom(null,e)}}))}function x(e,t,n){return!n&&e.__zooming||new b(e,t)}function b(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=a.apply(e,t),this.taps=0}function A(e,...t){if(i.apply(this,arguments)){var n=x(this,t).event(e),a=this.__zoom,s=Math.max(c[0],Math.min(c[1],a.k*Math.pow(2,r.apply(this,arguments)))),l=si(e);if(n.wheel)n.mouse[0][0]===l[0]&&n.mouse[0][1]===l[1]||(n.mouse[1]=a.invert(n.mouse[0]=l)),clearTimeout(n.wheel);else{if(a.k===s)return;n.mouse=[l,a.invert(l)],Rt(this),n.start()}zs(e),n.wheel=setTimeout(h,150),n.zoom("mouse",o(v(y(a,s),n.mouse[0],n.mouse[1]),n.extent,g))}function h(){n.wheel=null,n.end()}}function _(e,...t){if(!n&&i.apply(this,arguments)){var a=e.currentTarget,r=x(this,t,!0).event(e),s=ri(e.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",p,!0),c=si(e,a),l=e.clientX,h=e.clientY;di(e.view),Vs(e),r.mouse=[c,this.__zoom.invert(c)],Rt(this),r.start()}function d(e){if(zs(e),!r.moved){var t=e.clientX-l,n=e.clientY-h;r.moved=t*t+n*n>u}r.event(e).zoom("mouse",o(v(r.that.__zoom,r.mouse[0]=si(e,a),r.mouse[1]),r.extent,g))}function p(e){s.on("mousemove.zoom mouseup.zoom",null),pi(e.view,r.moved),zs(e),r.event(e).end()}}function R(e,...t){if(i.apply(this,arguments)){var n=this.__zoom,r=si(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(r),c=n.k*(e.shiftKey?.5:2),h=o(v(y(n,c),r,s),a.apply(this,t),g);zs(e),l>0?ri(this).transition().duration(l).call(k,h,r,e):ri(this).call(f.transform,h,r,e)}}function T(n,...a){if(i.apply(this,arguments)){var o,r,s,c,g=n.touches,l=g.length,h=x(this,a,n.changedTouches.length===l).event(n);for(Vs(n),r=0;r<l;++r)c=[c=si(s=g[r],this),this.__zoom.invert(c),s.identifier],h.touch0?h.touch1||h.touch0[2]===c[2]||(h.touch1=c,h.taps=0):(h.touch0=c,o=!0,h.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(h.taps<2&&(t=c[0],e=setTimeout((function(){e=null}),p)),Rt(this),h.start())}}function F(e,...t){if(this.__zooming){var n,i,a,r,s=x(this,t).event(e),c=e.changedTouches,l=c.length;for(zs(e),n=0;n<l;++n)a=si(i=c[n],this),s.touch0&&s.touch0[2]===i.identifier?s.touch0[0]=a:s.touch1&&s.touch1[2]===i.identifier&&(s.touch1[0]=a);if(i=s.that.__zoom,s.touch1){var h=s.touch0[0],d=s.touch0[1],p=s.touch1[0],u=s.touch1[1],m=(m=p[0]-h[0])*m+(m=p[1]-h[1])*m,f=(f=u[0]-d[0])*f+(f=u[1]-d[1])*f;i=y(i,Math.sqrt(m/f)),a=[(h[0]+p[0])/2,(h[1]+p[1])/2],r=[(d[0]+u[0])/2,(d[1]+u[1])/2]}else{if(!s.touch0)return;a=s.touch0[0],r=s.touch0[1]}s.zoom("touch",o(v(i,a,r),s.extent,g))}}function M(e,...i){if(this.__zooming){var a,o,r=x(this,i).event(e),s=e.changedTouches,c=s.length;for(Vs(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),a=0;a<c;++a)o=s[a],r.touch0&&r.touch0[2]===o.identifier?delete r.touch0:r.touch1&&r.touch1[2]===o.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),2===r.taps&&(o=si(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<m)){var g=ri(this).on("dblclick.zoom");g&&g.apply(this,arguments)}}}return f.transform=function(e,t,n,i){var a=e.selection?e.selection():e;a.property("__zoom",Us),e!==a?k(e,t,n,i):a.interrupt().each((function(){x(this,arguments).event(i).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},f.scaleBy=function(e,t,n,i){f.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,i)},f.scaleTo=function(e,t,n,i){f.transform(e,(function(){var e=a.apply(this,arguments),i=this.__zoom,r=null==n?w(e):"function"==typeof n?n.apply(this,arguments):n,s=i.invert(r),c="function"==typeof t?t.apply(this,arguments):t;return o(v(y(i,c),r,s),e,g)}),n,i)},f.translateBy=function(e,t,n,i){f.transform(e,(function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),a.apply(this,arguments),g)}),null,i)},f.translateTo=function(e,t,n,i,r){f.transform(e,(function(){var e=a.apply(this,arguments),r=this.__zoom,s=null==i?w(e):"function"==typeof i?i.apply(this,arguments):i;return o(Ns.translate(s[0],s[1]).scale(r.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,g)}),i,r)},b.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=ri(this.that).datum();d.call(e,this.that,new Cs(e,{sourceEvent:this.sourceEvent,target:f,type:e,transform:this.that.__zoom,dispatch:d}),t)}},f.wheelDelta=function(e){return arguments.length?(r="function"==typeof e?e:Es(+e),f):r},f.filter=function(e){return arguments.length?(i="function"==typeof e?e:Es(!!e),f):i},f.touchable=function(e){return arguments.length?(s="function"==typeof e?e:Es(!!e),f):s},f.extent=function(e){return arguments.length?(a="function"==typeof e?e:Es([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),f):a},f.scaleExtent=function(e){return arguments.length?(c[0]=+e[0],c[1]=+e[1],f):[c[0],c[1]]},f.translateExtent=function(e){return arguments.length?(g[0][0]=+e[0][0],g[1][0]=+e[1][0],g[0][1]=+e[0][1],g[1][1]=+e[1][1],f):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},f.constrain=function(e){return arguments.length?(o=e,f):o},f.duration=function(e){return arguments.length?(l=+e,f):l},f.interpolate=function(e){return arguments.length?(h=e,f):h},f.on=function(){var e=d.on.apply(d,arguments);return e===d?f:e},f.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,f):Math.sqrt(u)},f.tapDistance=function(e){return arguments.length?(m=+e,f):m},f}().scaleExtent([1,5]).extent([[0,0],[this.chart.width-this.chart.padding.yAxis,this.chart.height]]).translateExtent([[0,0],[this.chart.width-this.chart.padding.yAxis,this.chart.height]]),this.k=1,this.handleZoom()}enableZoom(e){this.zoom.on("zoom",e),this.chart.elements.contentContainer.select(".zoom-rect").call(this.zoom)}appendZoomBar(){return this.chart.elements.svg.append("g").attr("id","zoom-container").attr("class","zoom-container").attr("height",30).attr("width",this.chart.width-this.chart.padding.yAxis).attr("transform",`translate(${this.chart.padding.yAxis}, ${this.chart.height-30})`)}resetZoom(){this.k=1,this.updateZoomNumber()}handleZoomMinus(){this.k=this.k-1,this.updateZoomNumber()}handleZoomPlus(){this.k=this.k+1,this.updateZoomNumber()}handleZoom(){ri(`#${this.chart.id} #zoom-minus`).on("click",this.handleZoomMinus.bind(this)),ri(`#${this.chart.id} #zoom-plus`).on("click",this.handleZoomPlus.bind(this))}updateZoomNumber(){ri(`#${this.chart.id} #zoom-number`).attr("value",100+25*(this.k-1)+"%")}}class Mc extends wc{get data(){return this._data}set data(e){this._data=e.filter((e=>e.selected)),this.zoomChart.x.scale.domain([this.minTimelineDate(),this.maxTimelineDate()]),this.x.transition([Os(this.data.map((e=>Os(e.value.map((e=>e.timestamp)))))),Ws(this.data.map((e=>Ws(e.value.map((e=>e.timestamp))))))]),this.clicking.clicked&&this.clicking.removeClick(),this.render(),void 0!==this.extend&&this.extend()}constructor(e){super("timeline",[Os(e.map((e=>Os(e.value.map((e=>e.timestamp)))))),Ws(e.map((e=>Ws(e.value.map((e=>e.timestamp))))))],new fc(75,75,5)),this.tooltip=new sc(this),this.zoom=new Fc(this),this.zoomChart=new Ec(this,[this.minTimelineDate(e),this.maxTimelineDate(e)]),this.clicking=new Cc(this),this.data=e}render(){let e=this;0==e.data.length?(Qr(`#${e.id} .card-subtitle span`).html(""),Qr(`#${e.id} .card-subtitle .text-muted`).html("Add group codes from the left sidebar")):(ri(`#${e.id} .card-subtitle .instructions`).html(1===e.data.length?`Filtering by <span class="badge rounded-pill bg-info pointer">${e.data[0].group} <i class="fas fa-window-close"></i></span>`:null),ri(`#${e.id} .card-subtitle .text-muted`).html(`The oldest reflection was on ${e.minTimelineDate().toDateString()}${1!=e.data.length?` in the group code ${e.data[function(e,t){let n,i=-1,a=-1;for(const t of e)++a,null!=t&&(n>t||void 0===n&&t>=t)&&(n=t,i=a);return i}(e.data.map((e=>function(e,t){let n;for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);return n}(e.value.map((e=>e.timestamp))))))].group}`:""}, while\n                    the newest reflection was on ${e.maxTimelineDate().toDateString()}${1!=e.data.length?` in the group code ${e.data[function(e,t){let n,i=-1,a=-1;for(const t of e)++a,null!=t&&(n<t||void 0===n&&t>=t)&&(n=t,i=a);return i}(e.data.map((e=>function(e,t){let n;for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);return n}(e.value.map((e=>e.timestamp))))))].group}`:""}`)),e.elements.contentContainer.selectAll(".timeline-container").data(e.data).join((t=>t.append("g").attr("class","timeline-container").call((t=>e.scatter(t,e)))),(t=>t.call((t=>e.scatter(t,e)))),(e=>e.remove())),e.elements.content=e.elements.contentContainer.selectAll(".circle"),e.tooltip.enableTooltip((function(t,n){if(ri(this).attr("class").includes("clicked"))return;e.tooltip.appendTooltipContainer();let i=e.tooltip.appendTooltipText(n.timestamp.toDateString(),[new rc("User",n.pseudonym),new rc("Point",n.point)]);e.tooltip.positionTooltipContainer(function(t,n){let i=e.x.scale(t);return e.width-e.padding.yAxis<i+n.node().getBBox().width?i-n.node().getBBox().width:i}(n.timestamp,i),function(t,n){var i=e.y.scale(t)-n.node().getBBox().height-10;return i<0?i+n.node().getBBox().height+20:i}(n.point,i)),ri(this).attr("r",10),e.tooltip.appendLine(0,e.y.scale(n.point),e.x.scale(n.timestamp)-10,e.y.scale(n.point),n.colour),e.tooltip.appendLine(e.x.scale(n.timestamp),e.y.scale(0),e.x.scale(n.timestamp),e.y.scale(n.point)+10,n.colour)}),(function(){e.elements.svg.select(".tooltip-container").transition().style("opacity",0),e.tooltip.removeTooltip(),ri(this).attr("class").includes("clicked")||ri(this).attr("r",5)})),null==e.elements.zoomSVG&&(e.elements.zoomSVG=e.zoom.appendZoomBar(),e.elements.zoomFocus=e.elements.zoomSVG.append("g").attr("class","zoom-focus")),e.elements.zoomFocus.selectAll(".zoom-timeline-content-container").data(e.data).join((t=>t.append("g").attr("class","zoom-timeline-content-container").call((t=>e.scatter(t,e.zoomChart,!0,!0)))),(t=>t.call((t=>e.scatter(t,e.zoomChart,!0,!0)))),(e=>e.remove())),e.elements.zoomSVG.selectAll(".zoom-timeline-container").data(e.data).join((t=>t.append("g").attr("class","zoom-timeline-container").call((t=>{e.zoomChart.x.scale.rangeRound([0,e.width-e.padding.yAxis]),e.scatter(t,e.zoomChart,!0)}))),(t=>t.call((t=>{e.zoomChart.x.scale.rangeRound([0,e.width-e.padding.yAxis]),e.scatter(t,e.zoomChart,!0)}))),(e=>e.remove())),e.zoom.enableZoom((function(t){if(null!==t.sourceEvent){if("dblclick"===t.sourceEvent.type)return;if("wheel"===t.sourceEvent.type)return void window.scrollBy({top:t.sourceEvent.deltaY,behavior:"smooth"})}let n=[0,e.width-e.padding.yAxis].map((e=>t.transform.applyX(e)));e.x.scale.rangeRound(n),e.zoomChart.x.scale.rangeRound([0,e.width-e.padding.yAxis-5].map((e=>t.transform.invertX(e))));let i=ds().x((t=>e.x.scale(t.timestamp))).y((t=>e.y.scale(t.point)));e.elements.contentContainer.selectAll(".circle").attr("cx",(t=>e.x.scale(t.timestamp))),e.elements.zoomFocus.selectAll(".zoom-content").attr("cx",(t=>e.zoomChart.x.scale(t.timestamp))),e.elements.contentContainer.selectAll(".click-line").attr("d",(e=>i(e))),e.elements.contentContainer.selectAll(".click-container").attr("transform",(t=>`translate(${e.x.scale(t.timestamp)}, ${e.y.scale(t.point)})`)),e.x.axis.ticks(n[1]/75),e.elements.xAxis.call(e.x.axis),e.help.removeHelp()}))}scatter(e,t,n=!1,i=!1){e.selectAll("circle").data((e=>e.value.map((t=>new Gs(t,e.colour,e.group))))).join((e=>e.append("circle").attr("class",i?"zoom-content":n?"circle no-hover":"circle").attr("r",n?2:5).attr("cx",(e=>t.x.scale(e.timestamp))).attr("cy",(e=>t.y.scale(e.point))).attr("fill",(e=>e.colour)).attr("stroke",(e=>e.colour))),(e=>e.attr("fill",(e=>e.colour)).attr("stroke",(e=>e.colour)).call((e=>e.transition().duration(750).attr("cx",(e=>t.x.scale(e.timestamp))).attr("cy",(e=>t.y.scale(e.point)))))),(e=>e.remove()))}minTimelineDate(e){return Os((void 0===e?this.data:e).map((e=>Os(e.value.map((e=>e.timestamp))))))}maxTimelineDate(e){return Ws((void 0===e?this.data:e).map((e=>Ws(e.value.map((e=>e.timestamp))))))}}class Ec{constructor(e,t){this.x=new lc("zoom-container","",t,[0,e.width-e.padding.yAxis-5]),this.y=new gc("zoom-container","",[0,100],[25,0],"left")}}class Cc extends oc{removeClick(){super.removeClick(),this.chart.elements.content.attr("r",5)}appendScatterText(e,t,n=null){let i=this.chart.elements.contentContainer.append("g").datum(e).attr("class","click-container"),a=i.append("rect").attr("class","click-box").attr("rx",5).attr("ry",5),o=i.append("text").attr("class","click-text title").attr("x",10).text(t),r=o.node().getBBox().height;o.attr("y",r),null!=n&&n.forEach(((e,t)=>{o.append("tspan").attr("class","click-text").attr("y",r*(t+2)).attr("x",15).text(`${e.label}: ${e.value}`)})),a.attr("width",o.node().getBBox().width+20).attr("height",o.node().getBBox().height+5).attr("clip-path",`url(#clip-${this.chart.id})`),i.attr("transform",this.positionClickContainer(a,o,e))}positionClickContainer(e,t,n){let i=this.chart.x.scale(n.timestamp),a=this.chart.y.scale(n.point)-e.node().getBBox().height-10;return this.chart.width-this.chart.padding.yAxis<this.chart.x.scale(n.timestamp)+t.node().getBBox().width&&(i=this.chart.x.scale(n.timestamp)-e.node().getBBox().width),this.chart.y.scale(n.point)-e.node().getBBox().height-10<0&&(a=a+e.node().getBBox().height+20),`translate(${i}, ${a})`}}class Dc{get sortBy(){return this._sortBy}set sortBy(e){this.setAsc(e),this._sortBy=e,this.setChevronVisibility(),this.handleChevronChange()}constructor(e,t){this.asc=!1,this.id=e,this.sortBy=t}sortData(e){return e.sort(((e,t)=>this.sortFunction(e[this.sortBy],t[this.sortBy])))}sortFunction(e,t){return e<t?this.asc?1:-1:e>t?this.asc?-1:1:0}setAsc(e){this.asc=this.sortBy===e&&!this.asc}setChevronVisibility(){var e,t;document.querySelectorAll(`#${this.id} .sort-by label i`).forEach((e=>e.classList.add("d-none"))),null===(t=null===(e=this.getCurrentLabel())||void 0===e?void 0:e.querySelector("i"))||void 0===t||t.classList.remove("d-none")}handleChevronChange(){var e,t;let n=this.getCurrentLabel();null===(e=null==n?void 0:n.querySelector("i"))||void 0===e||e.classList.remove("fa-chevron-down","fa-chevron-up"),null===(t=null==n?void 0:n.querySelector("i"))||void 0===t||t.classList.add(this.asc?"fa-chevron-up":"fa-chevron-down")}getCurrentLabel(){return document.querySelector(`#${this.id} .sort-by label[for="sort-${this.sortBy}"]`)}}class $c{get data(){return this._data}set data(e){this._data=e.filter((e=>e.selected)),this.render()}get thresholds(){return this._thresholds}set thresholds(e){this._thresholds=e,Qr(`#${this.id} meter`).attr("low",this.thresholds[0]).attr("high",this.thresholds[1])}constructor(e){this._thresholds=[30,70],this.id="reflections",this.group=e[0].group,this.sort=new Dc(this.id,"pseudonym"),this.help=new yc(this.id),this.data=e}render(){const e=this;ri(`#${e.id} .nav.nav-tabs`).selectAll("li").data(e.data).join((t=>t.append("li").attr("class","nav-item pointer").append("a").attr("class","nav-link").classed("active",((e,t)=>0===t)).html((e=>e.group)).on("click",(function(t,n){ri(`#${e.id} .nav.nav-tabs`).selectAll("a").classed("active",!1),ri(this).classed("active",!0),e.group=n.group,e.renderTabContent(e.getUserData(n.value))}))),(e=>e.select("a").classed("active",((e,t)=>0==t)).html((e=>e.group))),(e=>e.remove())),0!==e.data.length?(e.handleSort(),e.renderTabContent(e.getUserData(e.data[0].value))):e.renderNoData()}renderTabContent(e){const t=this,n=e.reduce(((e,t)=>e.avg<t.avg?e:t)),i=e.reduce(((e,t)=>e.avg>t.avg?e:t));ri(`#${t.id} .text-muted`).html(1===e.length?`The user ${e[0].pseudonym} has a total of ${e[0].total} reflections between\n                ${e[0].minDate.toDateString()} and ${e[0].maxDate.toDateString()}`:`The user ${n.pseudonym} is the most distressed, while the user ${i.pseudonym} is the most soaring`),ri(`#${t.id} .tab-content`).selectAll("div .statistics-text").data(t.sort.sortData(e)).join((e=>e.append("div").attr("class","row statistics-text").attr("id",(e=>e.pseudonym)).call((e=>e.append("div").attr("class","col-md-4").call((e=>e.append("div").attr("class","sticky-top").call((e=>e.append("h5").attr("class","mb-0 mt-1").html((e=>`${e.pseudonym} <small>average is</small>`)))).call((e=>e.append((e=>t.renderUserMeter(e))))))))).call((e=>e.append("div").attr("class","col-md-8").append("p").attr("class","mb-1").call((e=>e.append("span").html((e=>`User ${e.pseudonym} reflections in chronological order:`)))).call((e=>e.append("ul").attr("class","pr-3").call((e=>t.renderReflections(e)))))))),(e=>e.attr("id",(e=>e.pseudonym)).call((e=>e.select("h5").html((e=>`${e.pseudonym} <small>average is</small>`)))).call((e=>e.select("meter").attr("value",(e=>e.avg)))).call((e=>e.select("p span").html((e=>`User ${e.pseudonym} reflections in chronological order:`)))).call((e=>t.renderReflections(e.select("p ul"))))),(e=>e.remove()))}renderReflections(e){e.selectAll("li").data((e=>x(e.reflections,(e=>e.timestamp)))).join((e=>e.append("li").classed("reflection-selected",(e=>e.selected)).html((e=>`<i>${e.timestamp.toDateString()} | Reflection state point ${e.point}</i><br> ${e.text}`))),(e=>e.classed("reflection-selected",(e=>e.selected)).html((e=>`<i>${e.timestamp.toDateString()} | Reflection state point ${e.point}</i><br> ${e.text}`))),(e=>e.remove()))}handleSort(){const e=this;Qr("#sort-users .btn-group label").on("click",(function(){const t=this.control.value;e.sort.sortBy=t;let n=e.getUserData(e.data.find((t=>t.group===e.group)).value);e.renderTabContent(n)}))}renderUserMeter(e){const t=document.createElement("div");t.classList.add("row","mt-1");const n=function(){let e=[];return["distressed","going ok","soaring"].forEach((t=>{let n=function(e){let t=document.createElement("div");return t.classList.add("col-4","xx-small"),t.innerHTML=e,t}(t);"going ok"===t&&n.classList.add("text-center"),"soaring"===t&&n.classList.add("text-right"),e.push(n)})),e}();t.appendChild(n[0]),t.appendChild(n[1]),t.appendChild(n[2]);const i=document.createElement("div");i.classList.add("col-12");const a=document.createElement("meter");return a.classList.add("w-100","user-meter"),a.setAttribute("max","100"),a.setAttribute("value",e.avg.toString()),a.setAttribute("low",this.thresholds[0].toString()),a.setAttribute("optimum","99.99"),a.setAttribute("high",this.thresholds[1].toString()),i.appendChild(a),t.appendChild(i),t}renderNoData(){ri(`#${this.id} .text-muted`).html("Add group codes from the left sidebar"),ri(`#${this.id} .tab-content`).selectAll("div .statistics-text").remove()}getUserData(e){return Hs(e,"pseudonym").map((e=>({pseudonym:e.key,avg:js(e.value.map((e=>e.point))),total:e.value.length,minDate:Os(e.value.map((e=>e.timestamp))),maxDate:Ws(e.value.map((e=>e.timestamp))),reflections:e.value})))}}class Pc{get data(){return this._data}set data(e){this._data=e.filter((e=>e.selected)),this.render()}constructor(e){this.data=e}render(){let e=this,t=ri("#users-total .card-title span").datum();ri("#users-total .card-title span").datum(k(e.data.map((e=>e.usersTotal)))).transition().duration(1e3).tween("html",(function(){let n=null==t?0:t,i=k(e.data.map((e=>e.usersTotal)));return function(e){this.innerHTML=n<i?(n+Math.round(e*(i-n))).toString():(n-Math.round(e*(n-i))).toString()}}));let n=ri("#ref-total .card-title span").datum();ri("#ref-total .card-title span").datum(k(e.data.map((e=>e.refTotal)))).transition().duration(1e3).tween("html",(function(){let t=null==n?0:n,i=k(e.data.map((e=>e.refTotal)));return function(e){this.innerHTML=t<i?(t+Math.round(e*(i-t))).toString():(t-Math.round(e*(t-i))).toString()}}));let i=ri("#ru-rate .card-title span").datum();ri("#ru-rate .card-title span").datum(0!=e.data.length?Math.round(w(e.data.map((e=>100*e.ruRate))))/100:0).transition().duration(1e3).tween("html",(function(){let t=null==i?0:i,n=0!=e.data.length?Math.round(w(e.data.map((e=>100*e.ruRate))))/100:0;return function(e){this.innerHTML=t<n?(t+e*(n-t)).toFixed(2):(t-e*(t-n)).toFixed(2)}}))}}class Sc{constructor(e){try{let t=e.map((e=>new tc(e.group,e.value,e.createDate))).map((e=>e.transformData()));const n=Wi(Jr);t=t.map((e=>new Xs(e.group,e.value,e.createDate,n(e.group),!0)));try{this.totals=new Pc(t)}catch(e){this.renderError(e,"users-totals",".card-title span")}try{this.barChart=new Tc(t)}catch(e){this.renderError(e,"users")}try{this.histogram=new xc(t)}catch(e){this.renderError(e,"histogram")}try{this.timeline=new Mc(t)}catch(e){this.renderError(e,"timeline")}try{this.users=new $c(t)}catch(e){this.renderError(e,"reflections")}this.preloadGroups(t)}catch(e){this.renderError(e,"users-totals",".card-title span"),this.renderError(e,"users"),this.renderError(e,"histogram"),this.renderError(e,"timeline"),this.renderError(e,"reflections")}}renderError(e,t,n){ri(`#${t} ${void 0===n?".chart-container":n}`).text(`There was an error rendering the chart. ${e}`)}sidebarBtn(){ri("#sidebar-btn").on("click",(function(){let e=ri("#sidebar").attr("class").includes("active");ri("#sidebar").classed("active",!e),ri("#groups").classed("active",e),ri("#switch-dashboard").classed("active",e),ri(this).classed("active",e)}))}preloadGroups(e,t=!1){return ri("#groups").selectAll("li").data(e).enter().append("li").append("div").attr("class","input-group mb-1").call((e=>e.append("input").attr("type","text").attr("class","form-control group-row").attr("value",(e=>e.group)).property("disabled",!0))).call((e=>e.append("div").attr("class","input-group-append").append("div").attr("class","input-group-text group-row").append("input").attr("id",(e=>`colour-${e.group}`)).attr("type","color").attr("value",(e=>e.colour)).property("disabled",!t))),e}}function Nc(e){const t=new Sc(e);t.sidebarBtn(),ri("#users .card-subtitle").html(""),t.barChart.help.helpPopover("<b>Bar chart</b><br>\n        A bar chart of the users in each group code<br>\n        <u><i>Hover</i></u> over the bars for information on demand"),t.histogram.help.helpPopover("<b>Histogram</b><br>\n        A histogram group data points into user-specific ranges. The data points in this histogram are <i>users average reflection point</i>\n        <u><i>Hover</i></u> over the boxes for information on demand"),t.timeline.help.helpPopover("<b>Scatter plot</b><br>\n        The data is showed as a collection of points<br>The data represented are <i>reflections over time</i><br>\n        <u><i>Hover</i></u> over the circles for information on demand"),t.users.help.helpPopover("<b>Reflections</b><br>\n        Each user's reflections are shown sorted by time. The chart depicts the percentage of reflections in each reflection point group"),new ac([new ic("#groups","All your groups are selected to visualise and colours assigned. You cannot change this section"),new ic(".card-title button","Click the help symbol in any chart to get additional information"),new ic("#users .bar","Hover for information on demand"),new ic("#histogram .histogram-rect","Hover for information on demand"),new ic("#timeline .zoom-buttons","Click to zoom in and out. To pan the chart click, hold and move left or right in any blank area")])}class Vc extends Sc{constructor(e){super(e),this.sort=new Dc("sort-groups","createDate"),this.barChart.extend=this.extendBarChart.bind(this),this.extendBarChart(),this.histogram.extend=this.extendHistogram.bind(this),this.extendHistogram(),this.timeline.extend=this.extendTimeline.bind(this),this.extendTimeline(),this.handleGroups(),this.handleGroupsColours(),this.handleGroupsSort()}preloadGroups(e){return super.preloadGroups(e,!0),this.entries=e,ri("#groups").selectAll("li").select("div").insert("div","input").attr("class","input-group-prepend").append("div").attr("class","input-group-text group-row h-100").append("input").attr("type","checkbox").attr("value",(e=>e.group)).property("checked",!0),e.filter((e=>e.selected))}handleGroups(){const e=this,t=Qr("#all-groups input[type=checkbox]");t.on("change",(n=>{const i=n.target,a=e.entries.find((e=>e.group==i.value));i.checked?void 0!==a?a.selected=!0:(e.entries.forEach((e=>e.selected=!0)),t.property("checked",!0)):void 0!==a?a.selected=!1:(e.entries.forEach((e=>e.selected=!1)),t.property("checked",!1),e.barChart.clicking.clicked=!1);let o=e.entries,r=e.getClickData(e.barChart.elements.contentContainer);e.barChart.data=o,e.barChart.clicking.clicked?i.checked||i.value!=r.group||(e.barChart.clicking.removeClick(),e.totals.data=o,e.timeline.data=o,e.histogram.data=o,e.users.data=o):(e.totals.data=o,e.timeline.data=o,e.histogram.data=o,e.users.data=o),e.removeAllHelp()}))}handleGroupsColours(){const e=this;Qr("#groups input[type=color]").on("change",(t=>{let n=t.target,i=n.id.replace("colour-","");e.entries.find((e=>e.group==i)).colour=n.value;let a=e.entries.filter((e=>e.selected));if(e.barChart.data=a,e.barChart.clicking.clicked){let t=e.getClickData(e.barChart.elements.contentContainer);t.group==i&&(e.timeline.data=[e.entries.find((e=>e.group==i))],e.histogram.data=[t])}else e.timeline.data=a,e.histogram.data=a}))}handleGroupsSort(){const e=this;Qr("#sort-groups .btn-group label").on("click",(function(){const t=this.control.value;e.sort.sortBy=t,e.entries=e.sort.sortData(e.entries);let n=e.entries.filter((e=>e.selected)),i=e.getClickData(e.barChart.elements.contentContainer);e.barChart.data=n,e.barChart.clicking.clicked?e.barChart.elements.content.classed("clicked",(e=>e.group===i.group)):(e.histogram.data=n,e.users.data=n),e.removeAllHelp()}))}handleFilterButton(){const e=this.entries.filter((e=>e.selected));this.barChart.clicking.removeClick(),this.histogram.clicking.removeClick(),this.histogram.data=e,this.timeline.data=e,this.totals.data=e,this.users.data=e}extendBarChart(){const e=this,t=e.barChart;t.elements.contentContainer.select(".zoom-rect").on("click",(()=>{t.clicking.removeClick(),e.histogram.clicking.removeClick(),e.totals.data=t.data,e.histogram.data=t.data,e.timeline.data=t.data,e.users.data=t.data})),t.clicking.enableClick((function(n,i){if(ri(this).attr("class").includes("clicked"))return t.clicking.removeClick(),e.totals.data=t.data,e.histogram.data=t.data,e.timeline.data=t.data,void(e.users.data=t.data);t.clicking.removeClick(),ri(this).classed("clicked",!0),t.clicking.clicked=!0,e.totals.data=[i],e.histogram.data=t.data.filter((e=>e.group==i.group)),e.timeline.data=[i],e.users.data=[i],e.removeAllHelp()}))}extendHistogram(){const e=this,t=e.histogram;ri(`#${t.id} .badge`).on("click",(()=>e.handleFilterButton())),t.elements.contentContainer.select(".zoom-rect").on("click",(()=>{t.clicking.removeClick(),e.totals.data=t.data,e.timeline.data=t.data,e.users.data=t.data})),t.elements.contentContainer.selectAll(".threshold-line").classed("grab",!0).call(function(){var e,t,n,i,a=fi,o=yi,r=vi,s=wi,c={},g=et("start","drag","end"),l=0,h=0;function d(e){e.on("mousedown.drag",p).filter(s).on("touchstart.drag",f).on("touchmove.drag",y,ci).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(r,s){if(!i&&a.call(this,r,s)){var c=w(this,o.call(this,r,s),r,s,"mouse");c&&(ri(r.view).on("mousemove.drag",u,gi).on("mouseup.drag",m,gi),di(r.view),li(r),n=!1,e=r.clientX,t=r.clientY,c("start",r))}}function u(i){if(hi(i),!n){var a=i.clientX-e,o=i.clientY-t;n=a*a+o*o>h}c.mouse("drag",i)}function m(e){ri(e.view).on("mousemove.drag mouseup.drag",null),pi(e.view,n),hi(e),c.mouse("end",e)}function f(e,t){if(a.call(this,e,t)){var n,i,r=e.changedTouches,s=o.call(this,e,t),c=r.length;for(n=0;n<c;++n)(i=w(this,s,e,t,r[n].identifier,r[n]))&&(li(e),i("start",e,r[n]))}}function y(e){var t,n,i=e.changedTouches,a=i.length;for(t=0;t<a;++t)(n=c[i[t].identifier])&&(hi(e),n("drag",e,i[t]))}function v(e){var t,n,a=e.changedTouches,o=a.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),t=0;t<o;++t)(n=c[a[t].identifier])&&(li(e),n("end",e,a[t]))}function w(e,t,n,i,a,o){var s,h,p,u=g.copy(),m=si(o||n,t);if(null!=(p=r.call(e,new mi("beforestart",{sourceEvent:n,target:d,identifier:a,active:l,x:m[0],y:m[1],dx:0,dy:0,dispatch:u}),i)))return s=p.x-m[0]||0,h=p.y-m[1]||0,function n(o,r,g){var f,y=m;switch(o){case"start":c[a]=n,f=l++;break;case"end":delete c[a],--l;case"drag":m=si(g||r,t),f=l}u.call(o,e,new mi(o,{sourceEvent:r,subject:p,target:d,identifier:a,active:f,x:m[0]+s,y:m[1]+h,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:u}),i)}}return d.filter=function(e){return arguments.length?(a="function"==typeof e?e:ui(!!e),d):a},d.container=function(e){return arguments.length?(o="function"==typeof e?e:ui(e),d):o},d.subject=function(e){return arguments.length?(r="function"==typeof e?e:ui(e),d):r},d.touchable=function(e){return arguments.length?(s="function"==typeof e?e:ui(!!e),d):s},d.on=function(){var e=g.on.apply(g,arguments);return e===g?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}().on("start",(function(){t.elements.contentContainer.selectAll(`.${t.id}-histogram-text-container`).remove(),ri(this).classed("grab",!1),ri(this).classed("grabbing",!0),t.help.removeHelp()})).on("drag",(function(e,n){if(n>50){if(t.y.scale.invert(e.y)<51||t.y.scale.invert(e.y)>99)return}else if(t.y.scale.invert(e.y)<1||t.y.scale.invert(e.y)>49)return;let i=t.elements.getThresholdsValues(t.x,t.y),a=i[0],o=i[1];ri(this).datum(t.y.scale.invert(e.y)).attr("y1",(e=>t.y.scale(e))).attr("y2",(e=>t.y.scale(e))).call((e=>t.thresholdAxis.tickValues(e.datum()>50?[a,e.datum()]:[e.datum(),o]).tickFormat((t=>e.datum()>50?t==a?"Distressed":t==e.datum()?"Soaring":"":t==e.datum()?"Distressed":t==o?"Soaring":"")))).call((e=>t.elements.contentContainer.selectAll(".threshold-axis").call(t.thresholdAxis))).call((e=>t.elements.contentContainer.select(".threshold-indicator-container."+(e.datum()>50?"soaring":"distressed")).attr("transform",`translate(${t.width-t.padding.yAxis-t.padding.right+5}, ${e.datum()>85&&n>50||e.datum()>15&&n<50?t.y.scale(e.datum())+25:t.y.scale(e.datum())-15})`).select("text").text(Math.round(e.datum()))))})).on("end",(function(){if(t.render(),ri(this).classed("grabbing",!1),ri(this).classed("grab",!0),t.clicking.clicked){let n=t.elements.contentContainer.select(".clicked").datum();t.clicking.appendThresholdPercentages(t.data,n),e.timeline.data=[n],e.users.data=[n]}e.users.thresholds=t.elements.getThresholdsValues(t.x,t.y)}))),t.clicking.enableClick((function(n,i){if(ri(this).attr("class").includes("clicked"))return t.clicking.removeClick(),e.totals.data=t.data,e.timeline.data=t.data,void(e.users.data=t.data);t.clicking.removeClick(),t.clicking.clicked=!0,t.clicking.appendThresholdPercentages(t.data,i),e.totals.data=[i],e.timeline.data=[i],e.users.data=[i]}))}extendTimeline(){const e=this,t=e.timeline;0==t.data.length&&(t.elements.contentContainer.selectAll(".circle").remove(),t.elements.svg.selectAll(".zoom-container").remove(),t.elements.contentContainer.selectAll(".click-line").remove(),t.elements.zoomSVG=void 0,t.elements.zoomFocus=void 0),ri(`#${t.id} .badge`).on("click",(()=>e.handleFilterButton())),e.histogram.clicking.clicked&&ri(`#${t.id} .instructions`).append("span").attr("class","badge rounded-pill bg-info pointer").html(`Users ${e.histogram.clicking.clickedBin} <i class="fas fa-window-close"></i>`).on("click",(()=>{e.histogram.clicking.removeClick(),e.barChart.clicking.clicked?(e.timeline.data=e.histogram.data,e.users.data=e.histogram.data):e.handleFilterButton()})),t.elements.contentContainer.select(".zoom-rect").on("click",(()=>{t.clicking.removeClick(),e.users.data=t.data})),t.clicking.enableClick((function(n,i){if(ri(this).attr("class").includes("clicked")){if(ri(this).attr("class").includes("main"))return t.clicking.removeClick(),void(e.users.data=t.data);t.elements.content.classed("main",!1)}t.clicking.removeClick(),e.users.data=t.data,t.clicking.clicked=!0,t.elements.content.filter((e=>e.pseudonym==i.pseudonym)).classed("clicked",!0).attr("r",10),t.elements.content.classed("not-clicked",(e=>e.pseudonym!=i.pseudonym)),ri(this).classed("main",!0).attr("r",15);let a=t.data.find((e=>e.group==i.group)),o=a.value.filter((e=>e.pseudonym==i.pseudonym)).map((e=>({refId:e.refId,timestamp:e.timestamp,point:e.point,text:e.text,pseudonym:e.pseudonym,selected:e.refId==i.refId})));const r=ds().x((e=>t.x.scale(e.timestamp))).y((e=>t.y.scale(e.point))).curve(Ts);t.elements.contentContainer.append("path").datum(x(o,(e=>e.timestamp))).attr("class","click-line").attr("d",(e=>r(e))).style("stroke",i.colour),o.forEach((e=>t.clicking.appendScatterText(e,e.point.toString()))),e.users.data=[new Xs(a.group,o,a.createDate,a.colour,a.selected)],t.help.removeHelp(),document.querySelector(".reflection-selected").scrollIntoView({behavior:"smooth",block:"start"})}))}removeAllHelp(){this.barChart.help.removeHelp(),this.histogram.help.removeHelp(),this.timeline.help.removeHelp()}getClickData(e){if(!e.select(".clicked").empty())return e.select(".clicked").datum()}}function zc(e){return t=this,n=void 0,a=function*(){const t=new Vc(e);t.sidebarBtn(),t.barChart.help.helpPopover("<b>Bar chart</b><br>\n        A bar chart of the users in each group code<br>\n        <u><i>Hover</i></u> over the bars for information on demand<br>\n        <u><i>Click</i></u> a bar to compare and drill-down"),t.histogram.help.helpPopover("<b>Histogram</b><br>\n        A histogram group data points into user-specific ranges. The data points in this histogram are <i>users average reflection point</i><br>\n        <u><i>Hover</i></u> over the boxes for information on demand<br>\n        <u><i>Click</i></u> a box to compare and drill-down<br>\n        <u><i>Drag</i></u> the lines to change the thresholds"),t.timeline.help.helpPopover("<b>Scatter plot</b><br>\n        The data is showed as a collection of points<br>The data represented are <i>reflections over time</i><br>\n        <u><i>Hover</i></u> over the circles for information on demand<br>\n        <u><i>Click</i></u> a circle to connect the user's reflections and drill-down"),t.users.help.helpPopover("<b>Reflections</b><br>\n        Each user's reflections are shown by group. The chart depicts the user's average reflection point<br>\n        <u><i>Sort</i></u> by user's name or average reflection state point"),new ac([new ic("#groups","Add groups to the charts and change their colours"),new ic("#sort-groups .sort-by","Sort groups by creation date, name or users' reflection point average"),new ic(".card-title button","Click the help symbol in any chart to get additional information"),new ic("#users .bar","Hover for information on demand or click to compare and drill-down. Other charts will show only the selected group"),new ic("#histogram .threshold-line","Drag to change the threshold (soaring or distressed) and recalculate the bins"),new ic("#histogram .histogram-rect","Click to compare the bin with other's group bins and drill-down"),new ic("#timeline .zoom-buttons","Click to zoom in and out. To pan the chart click, hold and move left or right in any blank area"),new ic("#timeline .circle","Hover for information on demand or click to connect the user's reflections"),new ic("#reflections .sort-by","Sort users alphabetically or by their average reflection state point")])},new((i=void 0)||(i=Promise))((function(e,o){function r(e){try{c(a.next(e))}catch(e){o(e)}}function s(e){try{c(a.throw(e))}catch(e){o(e)}}function c(t){t.done?e(t.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(t.value).then(r,s)}c((a=a.apply(t,n||[])).next())}));var t,n,i,a}var Bc=function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(r,s)}c((i=i.apply(e,t||[])).next())}))};class Kc extends kc{get data(){return this._data}set data(e){(()=>{Bc(this,void 0,void 0,(function*(){this.loading.isLoading=!0,this._data=this.filterData(e);const t=Os(e.reflections.map((e=>e.timestamp))),n=Ws(e.reflections.map((e=>e.timestamp))),i=new Date(Math.round(.1*(n.getTime()-t.getTime())));this.x.scale.domain([qs(t,-i.getDate()),qs(n,i.getDate())]),this.data.nodes.some((e=>void 0===e.index))&&this.processSimulation();try{yield this.render()}catch(e){this.renderError(e)}void 0!==this.extend&&this.extend(),this.loading.isLoading=!1}))})()}constructor(e,t){super("network","chart-container.network",[qs(Os(t),-30),qs(Ws(t),30)]),this.tooltip=new sc(this),this.groupByKey=Ss.Code,this.clicking=new Uc(this),this.zoom=new Ic(this),this.data=e}render(){return Bc(this,void 0,void 0,(function*(){const e=this;e.renderLines();let t=e.elements.contentContainer.selectAll(".network-link").data(e.data.edges).join((t=>t.append("line").attr("class","network-link").classed("reflection-link",(e=>e.edgeType==Ps.Ref)).attr("x1",e.width/2).attr("y1",e.height/2).attr("x2",e.width/2).attr("y2",e.height/2)),(e=>e.call((e=>e.classed("reflection-link",(e=>e.edgeType==Ps.Ref)).transition().duration(750).attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y))))),(e=>e.remove())),n=e.elements.content=e.elements.contentContainer.selectAll(".network-node-group").data(e.data.nodes).join((t=>t.append("g").attr("class","network-node-group pointer").classed("groupby",(e=>e.nodeType==$s.Grp)).attr("transform",`translate(${e.width/2}, ${e.height/2})`).call((e=>e.append("rect").attr("class","network-node").attr("rx",10).attr("ry",10).style("fill",(e=>e.properties.color)).style("stroke",(e=>e.properties.color)))).call((e=>e.append("text").attr("id",(e=>`text-${e.idx}`)).attr("class","network-text").style("dominant-baseline","central"))).call((e=>e.select("rect").attr("x",-5).attr("y",-5).attr("width",(t=>this.rScale(t,e))).attr("height",(t=>this.rScale(t,e)))))),(e=>e.call((e=>e.transition().duration(750).attr("transform",(e=>`translate(${e.x}, ${e.y})`)))).call((e=>e.select("rect").style("fill",(e=>e.properties.color)).style("stroke",(e=>e.properties.color)).attr("width",(t=>this.rScale(t,e))).attr("height",(t=>this.rScale(t,e))))).call((e=>e.select("text").attr("id",(e=>`text-${e.idx}`))))),(e=>e.remove()));e.elements.content=e.elements.contentContainer.selectAll(".network-node-group"),void 0!==this.simulation&&e.simulation.on("tick",(()=>{t.transition().duration(50).attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)),n.transition().duration(50).attr("transform",(t=>{const n=void 0!==t.fx?t.fx:t.x,i=void 0!==t.fy?t.fy:t.y;return`translate(${e.x.withinRange(n)}, ${e.y.withinRange(i)})`}))})),e.tooltip.enableTooltip((function(t,n){if(ri(this).attr("class").includes("clicked"))return;1==e.zoom.k&&e.simulation.alphaTarget(.3).restart();const i=e.getTooltipNodes(e.data,n);if(n.nodeType!==$s.Ref){const e=ri(this).datum();e.fx=e.x,e.fy=e.y}e.openNodes(i,!0),1==e.zoom.k&&setTimeout((()=>e.simulation.alphaTarget(0)),100)}),(function(t,n){if(ri(this).attr("class").includes("clicked"))return;if(n.nodeType!==$s.Ref){const e=ri(this).datum();e.fx=void 0,e.fy=void 0}const i=0===e.simulation.alphaTarget();i&&1==e.zoom.k&&e.simulation.alphaTarget(.3).restart(),e.closeNodes(!0),e.tooltip.removeTooltip(),i&&1==e.zoom.k?setTimeout((()=>e.simulation.alphaTarget(0)),500):e.simulation.alphaTarget(0)})),e.zoom.enableZoom((t=>{if(null!==t.sourceEvent){if("dblclick"===t.sourceEvent.type)return;if("wheel"===t.sourceEvent.type)return void window.scrollBy({top:t.sourceEvent.deltaY,behavior:"smooth"})}const n=[0,e.width-e.padding.yAxis-e.padding.right].map((e=>t.transform.applyX(e)));e.x.scale.rangeRound(n),e.elements.contentContainer.selectAll(".network-link").attr("x1",(e=>t.transform.applyX(e.source.x))).attr("x2",(e=>t.transform.applyX(e.target.x))),e.elements.contentContainer.selectAll(".network-node-group").attr("transform",(n=>{const i=void 0!==n.fx?n.fx:n.x,a=void 0!==n.fy?n.fy:n.y;return`translate(${e.x.withinRange(t.transform.applyX(i))}, ${e.y.withinRange(a)})`})),e.elements.contentContainer.selectAll(".timeline-line-container").data(e.getLines()).select("path").attr("d",(e=>e.line(e.datum))),e.x.axis.ticks(n[1]/75),e.elements.xAxis.call(e.x.axis),e.help.removeHelp()}))}))}getTooltipNodes(e,t){let n=e.edges.filter((e=>e.source===t)).map((e=>e.target));return n=n.concat(e.edges.filter((e=>e.target===t)).map((e=>e.source))),n.push(t),n}openNodes(e,t){const n=(e,n,i)=>{const a=e.select(`#text-${n.idx}`).node().getBoundingClientRect(),o=a.width+10,r=a.height+5;return t&&i&&this.simulation.force("collide",$i().radius((t=>e.data().map((e=>e.index)).includes(t.index)?o/3:10))),{width:o,height:r}};Qr(".network-node-group").filter((t=>e.includes(t))).call((e=>e.select("text").text((e=>e.expression)).style("opacity",0).transition().duration(500).style("opacity","1"))).call((e=>e.select(".network-node").transition().duration(500).attr("x",(t=>-n(e,t).width/2)).attr("y",(t=>-n(e,t).height/2)).attr("width",(t=>n(e,t).width)).attr("height",(t=>n(e,t,!0).height))))}closeNodes(e){e&&this.simulation.force("collide",$i().radius(10)),Qr(".network-node-group:not(.clicked)").call((e=>e.select("text").text(null).style("opacity",0).transition().duration(500).style("opacity","1"))).call((e=>e.select(".network-node").transition().duration(500).attr("x",-5).attr("y",-5).attr("width",(t=>this.rScale(t,e))).attr("height",(t=>this.rScale(t,e)))))}processSimulation(){this.simulation=function(e){var t,n=1,i=.001,a=1-Math.pow(i,1/300),o=0,r=.6,s=new Map,c=ut(h),g=et("tick","end"),l=function(){let e=1;return()=>(e=(1664525*e+1013904223)%Ni)/Ni}();function h(){d(),g.call("tick",t),n<i&&(c.stop(),g.call("end",t))}function d(i){var c,g,l=e.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(o-n)*a,s.forEach((function(e){e(n)})),c=0;c<l;++c)null==(g=e[c]).fx?g.x+=g.vx*=r:(g.x=g.fx,g.vx=0),null==g.fy?g.y+=g.vy*=r:(g.y=g.fy,g.vy=0);return t}function p(){for(var t,n=0,i=e.length;n<i;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var a=10*Math.sqrt(.5+n),o=n*Bi;t.x=a*Math.cos(o),t.y=a*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function u(t){return t.initialize&&t.initialize(e,l),t}return null==e&&(e=[]),p(),t={tick:d,restart:function(){return c.restart(h),t},stop:function(){return c.stop(),t},nodes:function(n){return arguments.length?(e=n,p(),s.forEach(u),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(i=+e,t):i},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(r=1-e,t):1-r},randomSource:function(e){return arguments.length?(l=e,s.forEach(u),t):l},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,u(n)),t):s.get(e)},find:function(t,n,i){var a,o,r,s,c,g=0,l=e.length;for(null==i?i=1/0:i*=i,g=0;g<l;++g)(r=(a=t-(s=e[g]).x)*a+(o=n-s.y)*o)<i&&(c=s,i=r);return c},on:function(e,n){return arguments.length>1?(g.on(e,n),t):g.on(e)}}}(this.data.nodes).force("link",function(e){var t,n,i,a,o,r,s=Pi,c=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},g=Mi(30),l=1;function h(i){for(var a=0,s=e.length;a<l;++a)for(var c,g,h,d,p,u,m,f=0;f<s;++f)g=(c=e[f]).source,d=(h=c.target).x+h.vx-g.x-g.vx||Ei(r),p=h.y+h.vy-g.y-g.vy||Ei(r),d*=u=((u=Math.sqrt(d*d+p*p))-n[f])/u*i*t[f],p*=u,h.vx-=d*(m=o[f]),h.vy-=p*m,g.vx+=d*(m=1-m),g.vy+=p*m}function d(){if(i){var r,c,g=i.length,l=e.length,h=new Map(i.map(((e,t)=>[s(e,t,i),e])));for(r=0,a=new Array(g);r<l;++r)(c=e[r]).index=r,"object"!=typeof c.source&&(c.source=Si(h,c.source)),"object"!=typeof c.target&&(c.target=Si(h,c.target)),a[c.source.index]=(a[c.source.index]||0)+1,a[c.target.index]=(a[c.target.index]||0)+1;for(r=0,o=new Array(l);r<l;++r)c=e[r],o[r]=a[c.source.index]/(a[c.source.index]+a[c.target.index]);t=new Array(l),p(),n=new Array(l),u()}}function p(){if(i)for(var n=0,a=e.length;n<a;++n)t[n]=+c(e[n],n,e)}function u(){if(i)for(var t=0,a=e.length;t<a;++t)n[t]=+g(e[t],t,e)}return null==e&&(e=[]),h.initialize=function(e,t){i=e,r=t,d()},h.links=function(t){return arguments.length?(e=t,d(),h):e},h.id=function(e){return arguments.length?(s=e,h):s},h.iterations=function(e){return arguments.length?(l=+e,h):l},h.strength=function(e){return arguments.length?(c="function"==typeof e?e:Mi(+e),p(),h):c},h.distance=function(e){return arguments.length?(g="function"==typeof e?e:Mi(+e),u(),h):g},h}().id((e=>e.idx)).distance(50).links(this.data.edges)).force("charge",function(){var e,t,n,i,a,o=Mi(-30),r=1,s=1/0,c=.81;function g(n){var a,o=e.length,r=_i(e,Vi,zi).visitAfter(h);for(i=n,a=0;a<o;++a)t=e[a],r.visit(d)}function l(){if(e){var t,n,i=e.length;for(a=new Array(i),t=0;t<i;++t)n=e[t],a[n.index]=+o(n,t,e)}}function h(e){var t,n,i,o,r,s=0,c=0;if(e.length){for(i=o=r=0;r<4;++r)(t=e[r])&&(n=Math.abs(t.value))&&(s+=t.value,c+=n,i+=n*t.x,o+=n*t.y);e.x=i/c,e.y=o/c}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=a[t.data.index]}while(t=t.next)}e.value=s}function d(e,o,g,l){if(!e.value)return!0;var h=e.x-t.x,d=e.y-t.y,p=l-o,u=h*h+d*d;if(p*p/c<u)return u<s&&(0===h&&(u+=(h=Ei(n))*h),0===d&&(u+=(d=Ei(n))*d),u<r&&(u=Math.sqrt(r*u)),t.vx+=h*e.value*i/u,t.vy+=d*e.value*i/u),!0;if(!(e.length||u>=s)){(e.data!==t||e.next)&&(0===h&&(u+=(h=Ei(n))*h),0===d&&(u+=(d=Ei(n))*d),u<r&&(u=Math.sqrt(r*u)));do{e.data!==t&&(p=a[e.data.index]*i/u,t.vx+=h*p,t.vy+=d*p)}while(e=e.next)}}return g.initialize=function(t,i){e=t,n=i,l()},g.strength=function(e){return arguments.length?(o="function"==typeof e?e:Mi(+e),l(),g):o},g.distanceMin=function(e){return arguments.length?(r=e*e,g):Math.sqrt(r)},g.distanceMax=function(e){return arguments.length?(s=e*e,g):Math.sqrt(s)},g.theta=function(e){return arguments.length?(c=e*e,g):Math.sqrt(c)},g}().strength(0)).force("collide",$i().radius(10)).force("forceY",function(e){var t,n,i,a=Mi(.1);function o(e){for(var a,o=0,r=t.length;o<r;++o)(a=t[o]).vy+=(i[o]-a.y)*n[o]*e}function r(){if(t){var o,r=t.length;for(n=new Array(r),i=new Array(r),o=0;o<r;++o)n[o]=isNaN(i[o]=+e(t[o],o,t))?0:+a(t[o],o,t)}}return"function"!=typeof e&&(e=Mi(null==e?0:+e)),o.initialize=function(e){t=e,r()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:Mi(+e),r(),o):a},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Mi(+t),r(),o):e},o}((e=>this.setYForce(e))).strength((e=>0!==this.setYForce(e)?.25:0))).force("forceX",function(e){var t,n,i,a=Mi(.1);function o(e){for(var a,o=0,r=t.length;o<r;++o)(a=t[o]).vx+=(i[o]-a.x)*n[o]*e}function r(){if(t){var o,r=t.length;for(n=new Array(r),i=new Array(r),o=0;o<r;++o)n[o]=isNaN(i[o]=+e(t[o],o,t))?0:+a(t[o],o,t)}}return"function"!=typeof e&&(e=Mi(null==e?0:+e)),o.initialize=function(e){t=e,r()},o.strength=function(e){return arguments.length?(a="function"==typeof e?e:Mi(+e),r(),o):a},o.x=function(t){return arguments.length?(e="function"==typeof t?t:Mi(+t),r(),o):e},o}((e=>this.setXForce(e))).strength((e=>0!==this.setXForce(e)?.25:0))),this.fixGroupNodes()}setYForce(e){const t=this.data.reflections.find((t=>t.refId==e.refId)),n=this.y.scale(null==t?void 0:t.point);return n<20?20:this.height-this.padding.top-this.padding.xAxis-20<n?-20:0}setXForce(e){const t=this.data.reflections.find((t=>t.refId==e.refId)),n=this.x.scale(null==t?void 0:t.timestamp);return n<20?20:this.width-this.padding.yAxis-this.padding.right-20<n?-20:0}filterData(e){let t=e.nodes.filter((e=>e.selected)),n=e.edges.filter((e=>e.selected));return new Js(e.reflections,t,n,this.groupByKey)}fixGroupNodes(){this.data.nodes.filter((e=>e.nodeType===$s.Ref)).forEach((e=>{let t=this.data.reflections.find((t=>t.refId==e.refId));e.fx=this.x.scale(null==t?void 0:t.timestamp),e.fy=this.y.scale(null==t?void 0:t.point)}))}rScale(e,t){return Ra().domain([1,Math.max.apply(null,t.data().filter((t=>t.refId==e.refId)).map((e=>e.total)))+1]).range([10,20])(e.total)}renderLines(){this.elements.contentContainer.selectAll(".timeline-line-container").data(this.getLines()).join((e=>e.append("g").attr("class","timeline-line-container").attr("clip-path",`url(#clip-${this.id})`).call((e=>e.append("path").datum((e=>e)).attr("class",(e=>e.name)).attr("d",(e=>e.line(e.datum)))))),(e=>e.select("path").call((e=>e.transition().duration(750).attr("d",(e=>e.line(e.datum)))))),(e=>e.remove()))}getLines(){const e=ds().x((e=>this.x.scale(e.timestamp))).y((e=>this.y.scale(e.point))).curve(Ts),t=ds().x((e=>this.x.scale(e.timestamp))).y((e=>this.y.scale(e.point))).curve(ms),n=js(this.data.reflections.map((e=>e.point))),i=ds().x((e=>this.x.scale(e.timestamp))).y(this.y.scale(n));return[{name:"hardline",line:e,datum:x(this.data.reflections,(e=>e.timestamp))},{name:"softline",line:t,datum:x(this.data.reflections,(e=>e.timestamp))},{name:"meanline",line:i,datum:x(this.data.reflections,(e=>e.timestamp))}]}}class Uc extends oc{removeClick(){super.removeClick(),this.chart.closeNodes(),Qr("#reflections .reflections-tab span").style("background-color",null),Qr("#reflections i").classed("selected",!1)}}class Ic extends Fc{handleZoomMinus(){this.chart.simulation.stop(),setTimeout((()=>{super.handleZoomMinus(),1===this.k&&this.chart.elements.contentContainer.attr("clip-path",`url(#clip-${this.chart.id}-nodes)`),this.chart.logger.logUIEvent("zoom-out click")}),100)}handleZoomPlus(){this.chart.simulation.stop(),setTimeout((()=>{super.handleZoomPlus(),this.k>1&&this.chart.elements.contentContainer.attr("clip-path",`url(#clip-${this.chart.id})`),this.chart.logger.logUIEvent("zoom-in click")}),100)}}class Yc{get nodes(){return this._nodes}set nodes(e){this._nodes=e,void 0!==this.nodes&&this.fillNodesText()}get data(){return this._data}set data(e){this._data=e.map((e=>(e.nodes=e.nodes.filter((e=>e.selected)),e))),this.render(),void 0!==this.extend&&this.extend()}constructor(e){this.logger=new uc,this.id="reflections",this.sort=new Dc("sort-reflections","timestamp"),this.help=new yc(this.id),this.data=e}render(){const e=this;ri(`#${e.id} .reflections-tab`).selectAll(".reflection").data(e.data).join((t=>t.append("div").attr("id",(e=>`ref-${e.refId}`)).attr("class","reflection").call((t=>t.append("p").attr("class","reflection-text").html((t=>e.text(t)))))),(t=>t.attr("id",(e=>`ref-${e.refId}`)).select("p").html((t=>e.text(t)))),(e=>e.remove())),e.handleSort()}text(e){let t=`<i>${e.timestamp.toDateString()} | Point: ${e.point}</i><br>`;for(var n=0;n<e.text.length;n++){const i=e.nodes.find((e=>e.startIdx===n)),a=e.nodes.find((e=>e.endIdx===n));t+=void 0!==i?`<span id="node-${i.idx}" class="badge rounded-pill" style="border: 2px solid ${i.properties.color}">${e.text[n]}`:void 0!==a?`${e.text[n]}</span>`:e.text[n]}return t}fillNodesText(){Qr(`#${this.id} .reflections-tab div`).filter((e=>this.nodes.map((e=>e.refId)).includes(e.refId))).selectAll("span").each(((e,t,n)=>{let i=this.nodes.find((e=>e.idx===parseInt(ri(n[t]).attr("id").replace("node-",""))));void 0!==i&&ri(n[t]).style("background-color",i.properties.color)}))}handleSort(){const e=this;Qr("#sort-reflections .sort-by label").on("click",(function(){const t=this.control.value;e.sort.sortBy=t,e._data=e.sort.sortData(e.data),e.render(),void 0!==e.nodes&&e.fillNodesText(),e.logger.logUIEvent(`sort-reflections ${t} click`)}))}}class Lc{constructor(e,t){try{const n=Wi(Jr),i=e.map((e=>new nc(e.reflections,e.pseudonym,null==t?void 0:t.find((t=>t.pseudonym==e.pseudonym))).transformData(n)));try{this.network=new Kc(new Js(i[0].reflections,i[0].analytics.nodes,i[0].analytics.edges),i[0].reflections.map((e=>e.timestamp)))}catch(e){this.renderError(e,"network")}try{this.resizeReflections(),this.reflections=new Yc(i[0].reflections)}catch(e){this.renderError(e,"reflections",".reflections-tab")}this.preloadTags(i[0]),this.handleMultiUser(i)}catch(e){this.renderError(e,"timeline"),this.renderError(e,"network"),this.renderError(e,"reflections",".reflections-tab")}}renderError(e,t,n){console.error(e),ri(`#${t} ${void 0===n?".chart-container":n}`).text(`There was an error rendering the chart. ${e}`)}resizeReflections(){const e=ri("#analytics-charts").node().getBoundingClientRect().height,t=ri("#reflections .card").node().getBoundingClientRect().height;ri("#reflections .reflections-tab").style("height",e-t+"px")}handleMultiUser(e,t){e.length>1&&(ri(".multi-user button").classed("dropdown-toggle",!0).property("disabled",!1),ri(".multi-user div").selectAll("a").data(e).enter().append("a").attr("class","dropdown-item").text((e=>e.pseudonym)).on("click",((e,n)=>{if(void 0===t){this.preloadTags(n);try{this.reflections.data=n.reflections}catch(e){this.renderError(e,"reflections",".reflections-tab")}try{this.network.data=n.analytics}catch(e){this.renderError(e,"network")}}else t(e,n);ri(".multi-user button").text(n.pseudonym)})))}preloadTags(e,t=!1){const n=Hs(e.analytics.nodes,"nodeCode").map((e=>({key:e.key,name:null!==e.value[0].name?e.value[0].name:e.key,properties:e.value[0].properties,selected:e.value[0].selected,description:e.value[0].description})));return ri("#tags").selectAll("li").data(n).join((e=>e.append("li").append("div").attr("class","input-group input-group-sm").call((e=>e.append("div").attr("class","me-2").call((e=>t?e.append("input").attr("class","d-none").attr("id",(e=>`tag-${e.key}`)).attr("type","checkbox").attr("value",(e=>e.key)).property("checked",!0):null)).call((e=>e.append("label").attr("class","tag-check-label").attr("for",(e=>`tag-${e.key}`)).text((e=>e.name)))))).call((e=>e.append("button").attr("class","badge rounded-pill bg-secondary tag-help").on("click",(function(e,t){const n=ri(`#${t.key}-help`),i=ri(this).select("i");n.empty()?(ri("body").append("div").attr("id",`${t.key}-help`).attr("class","popover fade show").style("top",`${window.pageYOffset+this.getBoundingClientRect().top+this.getBoundingClientRect().height}px`).call((e=>e.append("div").attr("class","popover-body").text(t.description))).call((e=>e.style("left",this.getBoundingClientRect().left-e.node().getBoundingClientRect().width/2+"px"))),null==i||i.attr("class","fas fa-times")):(n.remove(),null==i||i.attr("class","fas fa-info"))})).append("i").attr("class","fas fa-info"))).call((e=>e.append("input").attr("class","tag-color-picker").attr("id",(e=>`colour-${e.key}`)).attr("type","color").attr("value",(e=>e.properties.color)).property("disabled",!t)))),(e=>e.call((e=>e.select("div label").text((e=>e.name)))).call((e=>e.select(".tag-color-picker").attr("value",(e=>e.properties.color))))),(e=>e.remove())),n}}function Hc(e,t){const n=new Lc(e,t);n.network.help.helpPopover("<b>Network diagram</b><br>\n        A network diagram that shows the phrases and tags associated to your reflections<br>\n        The data represented are your <i>reflections over time</i><br>\n        <u><i>Hover</i></u> over the network nodes for information on demand"),n.reflections.help.helpPopover("<b>Reflections</b><br>\n        Your reflections are shown sorted by time")}class jc extends Lc{constructor(e,t){super(e,t),this.network.extend=this.extendNetwork.bind(this),this.extendNetwork(),this.logReflectionEntry()}handleMultiUser(e){super.handleMultiUser(e,((e,t)=>{this.preloadTags(t),this.reflectionAnalytics=t.reflections,this.analytics=t.analytics;const n=this.updateReflectionNodesData();this.reflections.data=n,this.network.zoom.resetZoom(),this.network.data=this.updateAnalyticsData()}))}preloadTags(e){return this.tags=super.preloadTags(e,!0).filter((e=>e.selected)),this.reflectionAnalytics=e.reflections,this.analytics=e.analytics,this.handleTags(),this.handleTagsColours(),this.handleGroupTags(),this.tags}handleTags(){const e=this;Qr("#tags input[type=checkbox]").on("change",(t=>{const n=t.target;n.checked?(e.tags.find((e=>e.key===n.value)).selected=!0,n.nextSibling.classList.toggle("off")):(e.tags.find((e=>e.key===n.value)).selected=!1,n.nextSibling.classList.toggle("off"));const i=e.updateReflectionNodesData(),a=e.network.clicking.clicked?e.reflections.nodes:null;e.reflections.data=i,e.network.data=e.updateAnalyticsData(),null!==a&&(e.network.clicking.removeClick(),e.reflections.nodes=a,e.network.clicking.clicked=!0,e.network.elements.content.classed("clicked",(e=>a.map((e=>e.idx)).includes(e.idx))),e.network.openNodes(a)),e.network.logger.logUIEvent(`tags-${n.value} change ${n.checked}`)}))}handleTagsColours(){const e=this;Qr("#tags input[type=color]").on("change",(t=>{const n=t.target,i=n.id.replace("colour-","");e.tags.find((e=>e.key===i)).properties.color=n.value;const a=e.updateReflectionNodesData(),o=e.network.clicking.clicked?e.reflections.nodes:null;e.reflections.data=a,e.network.data=e.updateAnalyticsData(),null!==o&&(e.reflections.nodes=o),e.network.logger.logUIEvent(`tags-colour-${i} change ${n.value}`)}))}handleGroupTags(){ri(`#${this.network.id} #group-tags`).on("change",(e=>{const t=e.target;t.checked?(this.network.groupByKey=Ss.Code,ri(".group-tags-check-div").classed("on",!0)):(this.network.groupByKey=Ss.Ref,ri(".group-tags-check-div").classed("on",!1)),this.reflections.nodes=void 0,this.network.data=this.updateAnalyticsData(),this.network.clicking.removeClick(),this.network.logger.logUIEvent(`group-tags ${t.checked} change`)}))}extendNetwork(){const e=this,t=e.network;t.elements.contentContainer.select(".zoom-rect").on("click",(()=>{t.clicking.removeClick(),e.reflections.nodes=void 0,t.logger.logUIEvent("node-selection remove click")})),t.clicking.enableClick((function(n,i){ri(this).attr("class").includes("clicked")&&(t.clicking.removeClick(),e.reflections.nodes=void 0),t.clicking.removeClick(),t.clicking.clicked=!0;let a=t.getTooltipNodes(e.analytics,i);t.openNodes(a),t.elements.content.classed("clicked",(e=>a.map((e=>e.idx)).includes(e.idx))),t.groupByKey===Ss.Code?e.reflections.nodes=e.analytics.nodes.filter((e=>e.refId==a[0].refId&&e.nodeCode==a[0].nodeCode)):e.reflections.nodes=a,document.querySelector(`#ref-${i.refId}`).scrollIntoView({behavior:"smooth",block:"start"}),ri(`#ref-${i.refId} i`).classed("selected",i.nodeType==$s.Ref),t.logger.logUIEvent(`node ${i.nodeCode} click`)}))}updateReflectionNodesData(e){return(void 0===e?this.reflectionAnalytics:this.reflectionAnalytics.filter((t=>t.refId===e.refId))).map((e=>(e.nodes=e.nodes.map((e=>{let t=this.tags.find((t=>t.key===e.nodeCode));return e.selected=t.selected,e.properties.color=t.properties.color,e})),e.nodeTags=e.nodeTags.map((e=>{let t=this.tags.find((t=>t.key===e.key));return e.selected=t.selected,e.properties.color=t.properties.color,e})),{refId:e.refId,point:e.point,text:e.text,timestamp:e.timestamp,nodes:e.nodes,nodeTags:e.nodeTags})))}updateAnalyticsData(){let e=this.analytics.nodes.map((e=>{let t=null!==e.name?e.name:e.nodeCode,n=this.tags.find((e=>e.name===t));return e.selected=n.selected,e.properties.color=n.properties.color,e})),t=this.analytics.edges.map((t=>{var n,i;let a="number"==typeof t.source?e.find((e=>e.idx==t.source)):t.source,o=null!==a.name?a.name:a.nodeCode,r="number"==typeof t.target?e.find((e=>e.idx==t.target)):t.target,s=null!==r.name?r.name:r.nodeCode;return t.selected=(null===(n=this.tags.find((e=>e.name===o)))||void 0===n?void 0:n.selected)&&(null===(i=this.tags.find((e=>e.name===s)))||void 0===i?void 0:i.selected),t}));return new Js(this.analytics.reflections,e,t)}logReflectionEntry(){ri("#reflection-entry input[type=range]").on("change",(e=>{const t=e.target;this.network.logger.logUIEvent(`reflection-entry-slider ${t.value} change`)})),ri("#reflection-entry textarea").on("change",(e=>{e.target,this.network.logger.logUIEvent("reflection-entry-textarea change")}))}}function qc(e,t){const n=new jc(e,t);n.network.help.helpPopover("<b>Network diagram</b><br>\n    A network diagram that shows the phrases and tags associated to your reflections<br>When grouped the size of the circle increases depending on the amount of nodes contained in that tag. The data represented are your <i>reflections over time</i><br>\n    <u><i>Hover</i></u> over the network nodes for information on demand<br>\n    <u><i>Click</i></u> to fill the background colour the nodes in the reflection text<br>\n    <u><i>Group tags</i></u> to reduce or increase the amount of nodes<br>\n    <u><i>Zoom</i></u> to explore the nodes closely"),n.reflections.help.helpPopover("<b>Reflections</b><br>\n        Your reflections are shown sorted by time. The words with associated tags have a different outline colour<br>\n        The reflections can be sorted by time or reflection point"),new ac([new ic(".card-title button","Click the help symbol in any chart to get additional information"),new ic("#network #group-tags-div","Group network nodes that are part of the same tag"),new ic("#network .network-node-group","Hover for information on demand. Click to fill the background colour of the nodes in the reflection text"),new ic("#network .zoom-buttons","Click to zoom in and out. To pan the chart click, hold and move left or right in any blank area"),new ic("#sort-reflections .sort-by","Sort reflections by date or reflection state point"),new ic("#reflections .reflection-text span","Phrases are outlined with a colour that matches the tags"),new ic("#tags li","Select which tags to see, change the colours if you like and find more information about the tag")])}return t})()));